<html>

<head>
    <title>Flow Specification</title>
    <link href="https://fonts.googleapis.com/css?family=Roboto+Slab" rel="stylesheet">
    <style>
        body {
            margin: 0;
            background-color: #fcfcfc;
            font-family: "Roboto Slab", "ff-tisa-web-pro", "Georgia", Arial, sans-serif;
            width: 800px;
            margin-left: auto;
            margin-right: auto;
            -webkit-print-color-adjust: exact;
        }

        h1,
        h2,
        h3,
        h4,
        h5,
        h6 {
            font-family: "Roboto Slab", "ff-tisa-web-pro", "Georgia", Arial, sans-serif;
            margin: 20px 0 10px;
            padding: 0;
            font-weight: bold;
        }

        h1 {
            font-size: 24px;
            color: #333;
        }

        h2 {
            font-size: 18px;
            color: white;
            border: 1px solid #444;
            background-color: #555;
            padding: 5px;
        }

        .context h2 {
            background-color: rgb(153, 130, 30);
            border: 1px solid rgb(107, 79, 17);
        }

        .excellent_functions h2 {
            background-color: #2B823A;
            border: 1px solid #10621E;
        }

        .excellent_tests h2 {
            background-color: #8b257e;
            border: 1px solid rgb(78, 14, 64);
        }

        .actions h2 {
            background-color: #246068;
            border: 1px solid #0E464E;
        }

        .events h2 {
            background-color: #AA4139;
            border: 1px solid #801D15;
        }

        h3 {
            font-size: 16px;
            margin: 10px 0px 0px 0px;
            color: #333;
        }

        h4 {
            font-size: 16px;
            color: #333
        }

        h5 {
            font-size: 14px;
            color: #333
        }

        h6 {
            color: #777;
            font-size: 14px
        }

        .highlight pre {
            background-color: #f8f8f8;
            border: 1px solid #ccc;
            font-size: 13px;
            line-height: 19px;
            overflow: auto;
            padding: 6px 10px;
        }

        pre {
            background-color: #f8f8f8;
            border: 1px solid #ccc;
            font-size: 13px;
            line-height: 19px;
            overflow: auto;
            padding: 6px 10px;
        }

        code .dt {
            color: #333;
            font-weight: bold;
        }

        code .st {
            color: #458;
        }

        .actions h1 {
            color: #333;
        }

        .input_action {
            position: relative;
        }

        .input_action h3 {
            position: absolute;
            right: 15px;
            color: #888;
        }

        .output_event {
            position: relative;
        }

        .output_event h3 {
            position: absolute;
            right: 15px;
            color: #888;
        }

        p code,
        li code {
            color: white;
            background-color: #444;
            border-radius: 3px;
            padding: 0px 4px 1px 4px;
        }

        .excellent_functions ul {
            padding-left: 15px;
        }

        .excellent_functions ul li {
            list-style-type: none;
        }
    </style>

</head>

<body>
    <center>
        <h1>Flow Specification</h1>
    </center>

 
    
 
    
 
    
 <ul>
 <li><a href="#container">Container</a></li>
 <li><a href="#nodes">Nodes</a></li>
 <li><a href="#routers">Routers</a></li>
 <li><a href="#waits">Waits</a></li>
 <li><a href="#context">Context</a></li>
 <li><a href="#template-functions">Template Functions</a></li>
 <li><a href="#template-tests">Template Tests</a></li>
 <li><a href="#action-definitions">Action Definitions</a></li>
 <li><a href="#event-definitions">Event Definitions</a></li>
 </ul>  
    
<h1 id="container">Container</h1>
<p>Flow definitions are defined as a list of nodes, the first node being the entry into the flow. The simplest possible flow containing no nodes whatsoever (and therefore being a no-op) can be defined as follows and includes only the UUID of the flow, its name and the authoring language for the flow:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb1-2" data-line-number="2">    <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;Empty Flow&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb1-3" data-line-number="3">    <span class="dt">&quot;uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;b7bb5e7c-ad49-4e65-9e24-bf7f1e4ff00a&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb1-4" data-line-number="4">    <span class="dt">&quot;language&quot;</span><span class="fu">:</span> <span class="st">&quot;eng&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb1-5" data-line-number="5">    <span class="dt">&quot;nodes&quot;</span><span class="fu">:</span> <span class="ot">[]</span></a>
<a class="sourceLine" id="cb1-6" data-line-number="6"><span class="fu">}</span></a></code></pre></div>
<h1 id="nodes">Nodes</h1>
<p>Flow definitions are composed of zero or more Nodes, the first node is always the entry node.</p>
<p>A Node consists of:</p>
<ul>
<li><code>actions</code> a list of 0-n actions which will be executed upon first entering a Node</li>
<li><code>wait</code> an optional pause in the flow waiting for some event to occur, such as a contact responding, a timeout for that response or a subflow completing</li>
<li><code>exit</code> a list of 0-n exits which can be used to link to other Nodes</li>
<li><code>router</code> an optional router which determines which exit to take</li>
</ul>
<p>At its simplest, a node can be just a single action with no exits, wait or router, such as:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb2-2" data-line-number="2">    <span class="dt">&quot;uuid&quot;</span><span class="fu">:</span><span class="st">&quot;5a06445e-d790-4bd3-a10b-b47bdcc9abed&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb2-3" data-line-number="3">    <span class="dt">&quot;actions&quot;</span><span class="fu">:</span><span class="ot">[</span><span class="fu">{</span></a>
<a class="sourceLine" id="cb2-4" data-line-number="4">        <span class="dt">&quot;uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;abc0a2bf-6b4a-4ee0-83e1-1eebae6948ac&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb2-5" data-line-number="5">        <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;send_msg&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb2-6" data-line-number="6">        <span class="dt">&quot;text&quot;</span><span class="fu">:</span> <span class="st">&quot;What is your name?&quot;</span></a>
<a class="sourceLine" id="cb2-7" data-line-number="7">    <span class="fu">}</span><span class="ot">]</span></a>
<a class="sourceLine" id="cb2-8" data-line-number="8"><span class="fu">}</span></a></code></pre></div>
<p>If a node wishes to route to another node, it can do so by defining one or more exits, each with the UUID of the node that is next. Without a router defined, the first exit will always be taken.</p>
<p>An exit consists of:</p>
<ul>
<li><code>uuid</code> the uuid of this exit</li>
<li><code>destination_node_uuid</code> the uuid of the node that should be visited if this exit is chosen by the router (optional)</li>
<li><code>name</code> a name for this exit (optional)</li>
</ul>
<div class="sourceCode" id="cb3"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb3-2" data-line-number="2">    <span class="dt">&quot;uuid&quot;</span><span class="fu">:</span><span class="st">&quot;5a06445e-d790-4bd3-a10b-b47bdcc9abed&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb3-3" data-line-number="3">    <span class="dt">&quot;actions&quot;</span><span class="fu">:</span><span class="ot">[</span><span class="fu">{</span></a>
<a class="sourceLine" id="cb3-4" data-line-number="4">        <span class="dt">&quot;uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;abc0a2bf-6b4a-4ee0-83e1-1eebae6948ac&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb3-5" data-line-number="5">        <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;send_msg&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb3-6" data-line-number="6">        <span class="dt">&quot;text&quot;</span><span class="fu">:</span> <span class="st">&quot;What is your name?&quot;</span></a>
<a class="sourceLine" id="cb3-7" data-line-number="7">    <span class="fu">}</span><span class="ot">]</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb3-8" data-line-number="8">    <span class="dt">&quot;exits&quot;</span><span class="fu">:</span> <span class="ot">[</span><span class="fu">{</span></a>
<a class="sourceLine" id="cb3-9" data-line-number="9">        <span class="dt">&quot;uuid&quot;</span><span class="fu">:</span><span class="st">&quot;eb7defc9-3c66-4dfc-80bc-825567ccd9de&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb3-10" data-line-number="10">        <span class="dt">&quot;destination_node_uuid&quot;</span><span class="fu">:</span><span class="st">&quot;ee0bee3f-34b3-4275-af78-f9ff52c82e6a&quot;</span></a>
<a class="sourceLine" id="cb3-11" data-line-number="11">    <span class="fu">}</span><span class="ot">]</span></a>
<a class="sourceLine" id="cb3-12" data-line-number="12"><span class="fu">}</span></a></code></pre></div>
<h1 id="routers">Routers</h1>
<h2 id="switch">Switch</h2>
<p>If a node wishes to route differently based on some state, it can add a <code>switch</code> router which defines one or more <code>cases</code>. Each case defines a <code>type</code> which is the name of an expression function that is run by passing the evaluation of <code>operand</code> as the first argument. Cases may define additional arguments using the <code>arguments</code> array on a case. If no case evaluates to true, then the <code>default_exit_uuid</code> will be used otherwise flow execution will stop.</p>
<p>A switch router may also define a <code>result_name</code> parameters which will save the result of the case which evaluated as true.</p>
<p>A switch router consists of:</p>
<ul>
<li><code>operand</code> the expression which will be evaluated against each of our cases</li>
<li><code>default_exit_uuid</code> the uuid of the default exit to take if no case matches (optional)</li>
<li><code>result_name</code> the name of the result which should be written when the switch is evaluated (optional)</li>
<li><code>cases</code> a list of 1-n cases which are evaluated in order until one is true</li>
</ul>
<p>Each case consists of:</p>
<ul>
<li><code>uuid</code> a unique uuid for this case</li>
<li><code>type</code> the type of this test, this must be an excellent test (see below) and will be passed the value of the switch‚Äôs operand as its first value</li>
<li><code>arguments</code> an optional list of templates which can be passed as extra parameters to the test (after the initial operand)</li>
<li><code>exit_uuid</code> the uuid of the exit that should be taken if this case evaluated to true</li>
</ul>
<p>An example switch router that tests for the input not being empty:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb4-2" data-line-number="2">    <span class="dt">&quot;uuid&quot;</span><span class="fu">:</span><span class="st">&quot;ee0bee3f-34b3-4275-af78-f9ff52c82e6a&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb4-3" data-line-number="3">    <span class="dt">&quot;router&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb4-4" data-line-number="4">        <span class="dt">&quot;type&quot;</span><span class="fu">:</span><span class="st">&quot;switch&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb4-5" data-line-number="5">        <span class="dt">&quot;operand&quot;</span><span class="fu">:</span> <span class="st">&quot;@run.input&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb4-6" data-line-number="6">        <span class="dt">&quot;default_exit_uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;9574fbfd-510f-4dfc-b989-97d2aecf50b9&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb4-7" data-line-number="7">        <span class="dt">&quot;cases&quot;</span><span class="fu">:</span> <span class="ot">[</span><span class="fu">{</span></a>
<a class="sourceLine" id="cb4-8" data-line-number="8">            <span class="dt">&quot;uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;6f78d564-029b-4715-b8d4-b28daeae4f24&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb4-9" data-line-number="9">            <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;has_text&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb4-10" data-line-number="10">            <span class="dt">&quot;exit_uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;cab600f5-b54b-49b9-a7ea-5638f4cbf2b4&quot;</span></a>
<a class="sourceLine" id="cb4-11" data-line-number="11">        <span class="fu">}</span><span class="ot">]</span></a>
<a class="sourceLine" id="cb4-12" data-line-number="12">    <span class="fu">},</span></a>
<a class="sourceLine" id="cb4-13" data-line-number="13">    <span class="dt">&quot;exits&quot;</span><span class="fu">:</span> <span class="ot">[</span><span class="fu">{</span></a>
<a class="sourceLine" id="cb4-14" data-line-number="14">        <span class="dt">&quot;uuid&quot;</span><span class="fu">:</span><span class="st">&quot;cab600f5-b54b-49b9-a7ea-5638f4cbf2b4&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb4-15" data-line-number="15">        <span class="dt">&quot;name&quot;</span><span class="fu">:</span><span class="st">&quot;Has Name&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb4-16" data-line-number="16">        <span class="dt">&quot;destination_node_uuid&quot;</span><span class="fu">:</span><span class="st">&quot;deec1dd4-b727-4b21-800a-0b7bbd146a82&quot;</span></a>
<a class="sourceLine" id="cb4-17" data-line-number="17">    <span class="fu">}</span><span class="ot">,</span><span class="fu">{</span></a>
<a class="sourceLine" id="cb4-18" data-line-number="18">        <span class="dt">&quot;uuid&quot;</span><span class="fu">:</span><span class="st">&quot;9574fbfd-510f-4dfc-b989-97d2aecf50b9&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb4-19" data-line-number="19">        <span class="dt">&quot;name&quot;</span><span class="fu">:</span><span class="st">&quot;Other&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb4-20" data-line-number="20">        <span class="dt">&quot;destination_node_uuid&quot;</span><span class="fu">:</span><span class="st">&quot;ee0bee3f-34b3-4275-af78-f9ff52c82e6a&quot;</span></a>
<a class="sourceLine" id="cb4-21" data-line-number="21">    <span class="fu">}</span><span class="ot">]</span></a>
<a class="sourceLine" id="cb4-22" data-line-number="22"><span class="fu">}</span></a></code></pre></div>
<h1 id="waits">Waits</h1>
<p>A node can indicate that it needs more information to continue by containing a wait.</p>
<h2 id="msg">Msg</h2>
<p>This wait type indicates that flow execution should pause until an incoming message is received and also gives an optional timeout in seconds as to when the flow should continue even if there is no reply:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb5-1" data-line-number="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb5-2" data-line-number="2">    <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;msg&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb5-3" data-line-number="3">    <span class="dt">&quot;timeout&quot;</span><span class="fu">:</span> <span class="dv">600</span></a>
<a class="sourceLine" id="cb5-4" data-line-number="4"><span class="fu">}</span></a></code></pre></div>
<h2 id="nothing">Nothing</h2>
<p>This wait type indicates that the caller can resume the session immediately with no incoming message or any other input. This type of wait enables the caller to commit changes in the session up to that point in the flow.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb6-1" data-line-number="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb6-2" data-line-number="2">    <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;nothing&quot;</span></a>
<a class="sourceLine" id="cb6-3" data-line-number="3"><span class="fu">}</span></a></code></pre></div>
<h1 id="context">Context</h1>
<p>Flows do not describe data flow but rather actions and logic branching. As such, variables collected in a flow and the state of the flow are accessed through what is called the context. The context contains variables representing the current contact in a flow, the last input from that contact as well as the results collected in a flow and any webhook requests made during the flow. Variables in the context may be referred to within actions by using the <code>@</code> symbol. For example, to greet a contact by their name in a <a href="#actions:send_msg">send_msg</a> action, the text of the action can be <code>Hi @contact.name!</code>.</p>
<p>The <code>@</code> symbol can be escaped in templates by repeating it, ie, <code>Hi @@twitter</code> would output <code>Hi @twitter</code>.</p>
<p>The context contains the following top-level variables:</p>
<ul>
<li><code>contact</code> the <a href="#contacts">contact</a> of the current flow run</li>
<li><code>run</code> the current <a href="#runs">run</a></li>
<li><code>parent</code> the parent of the current <a href="#runs">run</a>, i.e.¬†the run that started the current run</li>
<li><code>child</code> the child of the current <a href="#runs">run</a>, i.e.¬†the last subflow</li>
<li><code>trigger</code> the <a href="#triggers">trigger</a> that initiated this session</li>
</ul>
<p>The following types appear in the context:</p>
<ul>
<li><a href="#channels">Channels</a></li>
<li><a href="#contacts">Contacts</a></li>
<li><a href="#flows">Flows</a></li>
<li><a href="#groups">Groups</a></li>
<li><a href="#inputs">Inputs</a></li>
<li><a href="#results">Results</a></li>
<li><a href="#runs">Runs</a></li>
<li><a href="#triggers">Triggers</a></li>
<li><a href="#urns">URNs</a></li>
<li><a href="#webhooks">Webhooks</a></li>
</ul>
<div class="context">
<h2 id="channels">Channels</h2>
<p>A channel represents a means for sending and receiving input during a flow run.</p>
<p>A channel renders as its name in a template, and has the following properties which can be accessed:</p>
<ul>
<li><code>uuid</code> the UUID of the channel</li>
<li><code>name</code> the name of the channel</li>
<li><code>address</code> the address of the channel</li>
</ul>
<h3 id="examples">Examples</h3>
<pre><code>@contact.channel ‚Üí My Android Phone
@contact.channel.name ‚Üí My Android Phone
@contact.channel.address ‚Üí +16303455678
@run.input.channel.uuid ‚Üí c42528a5-8550-480e-ae4d-92995550e1d6
@(json(contact.channel)) ‚Üí {&quot;uuid&quot;: &quot;c42528a5-8550-480e-ae4d-92995550e1d6&quot;, &quot;name&quot;: &quot;My Android Phone&quot;, &quot;address&quot;: &quot;+16303455678&quot;}</code></pre>
<h2 id="contacts">Contacts</h2>
<p>A contact represents a person who is interacting with the flow.</p>
<p>A contact renders as the person‚Äôs name (or perferred URN if name isn‚Äôt set) in a template, and has the following properties which can be accessed:</p>
<ul>
<li><code>uuid</code> the UUID of the contact</li>
<li><code>name</code> the full name of the contact</li>
<li><code>first_name</code> the first name of the contact</li>
<li><code>language</code> the <a href="http://www-01.sil.org/iso639-3/">ISO-639-3</a> language code of the contact</li>
<li><code>urns</code> all <a href="#urns">URNs</a> the contact has set</li>
<li><code>urns.[scheme]</code> all the <a href="#urns">URNs</a> the contact has set for the particular URN scheme</li>
<li><code>urn</code> shorthand for <code>@(format_urn(c.urns.0))</code>, i.e.¬†the contact‚Äôs preferred <a href="#urns">URN</a> in friendly formatting</li>
<li><code>groups</code> all the <a href="#groups">groups</a> that the contact belongs to</li>
<li><code>fields</code> all the custom contact fields the contact has set</li>
<li><code>fields.[snaked_field_name]</code> the value of the specific field</li>
<li><code>channel</code> shorthand for <code>contact.urns.0.channel</code>, i.e.¬†the <a href="#channels">channel</a> of the contact‚Äôs preferred URN</li>
</ul>
<h3 id="examples-1">Examples</h3>
<pre><code>@contact ‚Üí Bobby Smith
@contact.name ‚Üí Bobby Smith
@contact.first_name ‚Üí Bobby
@contact.language ‚Üí eng
@contact.urns ‚Üí tel:+12065551212, tel:+16302425788, mailto:foo@bar.com
@contact.urns.0 ‚Üí tel:+12065551212
@contact.urns.tel ‚Üí tel:+12065551212, tel:+16302425788
@contact.mailto.0 ‚Üí mailto:foo@bar.com
@contact.urn ‚Üí (206) 555 1212
@contact.groups ‚Üí Males, Reporters
@contact.fields ‚Üí age: 36\ngender: MALE
@contact.fields.age ‚Üí 36
@contact.fields.gender ‚Üí MALE</code></pre>
<h2 id="flows">Flows</h2>
<p>A flow describes the ordered logic of actions and routers.</p>
<p>A flow renders as its name in a template, and has the following properties which can be accessed:</p>
<ul>
<li><code>uuid</code> the UUID of the flow</li>
<li><code>name</code> the name of the flow</li>
</ul>
<h3 id="examples-2">Examples</h3>
<pre><code>@run.flow ‚Üí Registration
@child.flow ‚Üí Age Collection
@run.flow.uuid ‚Üí 8eba5c7d-d7cb-4ebe-af7f-7d84bea870c5
@(json(run.flow)) ‚Üí {&quot;uuid&quot;: &quot;8eba5c7d-d7cb-4ebe-af7f-7d84bea870c5&quot;, &quot;name&quot;: &quot;Registration&quot;}</code></pre>
<h2 id="groups">Groups</h2>
<p>A group represents a grouping of contacts. It can be static (contacts are added and removed manually through <a href="#actions:add_contact_group">actions</a>) or dynamic (contacts are added automatically by a query).</p>
<p>A group renders as its name in a template, and has the following properties which can be accessed:</p>
<ul>
<li><code>uuid</code> the UUID of the group</li>
<li><code>name</code> the name of the group</li>
</ul>
<h3 id="examples-3">Examples</h3>
<pre><code>@contact.groups ‚Üí Males, Reporters
@contact.groups.0.uuid ‚Üí 8ddfda9c-9ea7-451e-a812-1c3153f91a87
@contact.groups.1.name ‚Üí Reporters
@(json(contact.groups.1)) ‚Üí {&quot;uuid&quot;: &quot;8ddfda9c-9ea7-451e-a812-1c3153f91a87&quot;, &quot;name&quot;: &quot;Reporters&quot;}</code></pre>
<h2 id="inputs">Inputs</h2>
<p>An input describes input from the contact and currently we only support one type of input: <code>msg</code>.</p>
<p>Any input has the following properties which can be accessed:</p>
<ul>
<li><code>uuid</code> the UUID of the input</li>
<li><code>type</code> the type of the input, e.g. <code>msg</code></li>
<li><code>channel</code> the <a href="#channels">channel</a> that the input was received on</li>
<li><code>created_on</code> the time when the input was created</li>
</ul>
<p>An input of type <code>msg</code> renders as its text and attachments in a template, and has the following additional properties:</p>
<ul>
<li><code>text</code> the text of the message</li>
<li><code>attachments</code> any attachments on the message</li>
<li><code>urn</code> the <a href="#urns">URN</a> that the input was received on</li>
</ul>
<h3 id="examples-4">Examples</h3>
<pre><code>@run.input ‚Üí Hello\nimage/jpeg:https://example.com/test.jpg
@run.input.type ‚Üí msg
@run.input.text ‚Üí Hello
@run.input.attachments ‚Üí image/jpeg:https://example.com/test.jpg
@(json(run.input)) ‚Üí {&quot;uuid&quot;: &quot;8ddfda9c-9ea7-451e-a812-1c3153f91a87&quot;, &quot;text&quot;: &quot;Hello&quot;, &quot;attachments&quot;: [&quot;image/jpeg:https://example.com/test.jpg&quot;], &quot;created_on&quot;: &quot;2000-01-01T00:00:00.000000000-00:00&quot;}</code></pre>
<h2 id="results">Results</h2>
<p>A result describes a value captured during a run‚Äôs execution. It might have been implicitly created by a router, or explicitly created by a <a href="#actions:set_run_result">set_run_result</a> action.</p>
<p>A result renders as its value in a template, and has the following properties which can be accessed:</p>
<ul>
<li><code>value</code> the value of the result</li>
<li><code>category</code> the category of the result</li>
<li><code>category_localized</code> the localized category of the result</li>
<li><code>created_on</code> the time when the result was created</li>
</ul>
<h3 id="examples-5">Examples</h3>
<pre><code>@run.results.color ‚Üí red
@run.results.color.value ‚Üí red
@run.results.color.category ‚Üí Red
@run.results.color.category_localized ‚Üí Rojo</code></pre>
<h2 id="runs">Runs</h2>
<p>A run is a single contact‚Äôs journey through a flow. It records the path they have taken, and the results that have been collected.</p>
<p>A run has several properties which can be accessed in expressions:</p>
<ul>
<li><code>uuid</code> the UUID of the run</li>
<li><code>flow</code> the <a href="#flows">flow</a> of the run</li>
<li><code>contact</code> the <a href="#contacts">contact</a> of the flow run</li>
<li><code>input</code> the <a href="#inputs">input</a> of the current run</li>
<li><code>results</code> the results that have been saved for this run</li>
<li><code>results.[snaked_result_name]</code> the value of the specific result, e.g. <code>run.results.age</code></li>
<li><code>webhook</code> the last <a href="#webhooks">webhook</a> call made in the current run</li>
</ul>
<h2 id="triggers">Triggers</h2>
<p>A trigger represents something which can initiate a session with the flow engine.</p>
<p>A trigger has several properties which can be accessed in expressions:</p>
<ul>
<li><code>type</code> the type of the trigger, one of <code>manual</code> or <code>flow</code></li>
<li><code>params</code> the parameters passed to the trigger</li>
</ul>
<h3 id="examples-6">Examples</h3>
<pre><code>@trigger.type ‚Üí manual
@trigger.params ‚Üí source: website\naddress:\n  state: WA
@(json(trigger.params)) ‚Üí {&quot;source&quot;: &quot;website&quot;, &quot;address&quot;: {&quot;state&quot;: &quot;WA&quot;}}</code></pre>
<h2 id="urns">URNs</h2>
<p>A URN represents a destination for an outgoing message or a source of an incoming message. It is string composed of 3 components: scheme, path, and display (optional). For example:</p>
<ul>
<li><em>tel:+16303524567</em></li>
<li><em>twitterid:54784326227#nyaruka</em></li>
<li><em>telegram:34642632786#bobby</em></li>
</ul>
<p>A URN has several properties which can be accessed in expressions:</p>
<ul>
<li><code>scheme</code> the scheme of the URN, e.g. ‚Äútel‚Äù, ‚Äútwitter‚Äù</li>
<li><code>path</code> the path of the URN, e.g. ‚Äú+16303524567‚Äù</li>
<li><code>display</code> the display portion of the URN, e.g. ‚Äú+16303524567‚Äù</li>
<li><code>channel</code> the preferred <a href="#channels">channel</a> of the URN</li>
</ul>
<p>To render a URN in a human friendly format, use the <a href="#functions:format_urn">format_urn</a> function.</p>
<pre><code>@contact.urns.0 ‚Üí tel:+12065551212
@contact.urns.0.scheme ‚Üí tel
@contact.urns.0.path ‚Üí +12065551212
@contact.urns.1.display ‚Üí nyaruka
@(format_urn(contact.urns.0)) ‚Üí (206) 555 1212</code></pre>
<h2 id="webhooks">Webhooks</h2>
<p>A webhook describes a call made to an external service.</p>
<p>A webhook has several properties which can be accessed in expressions:</p>
<ul>
<li><code>status</code> the status of the webhook - one of ‚Äúsuccess‚Äù, ‚Äúconnection_error‚Äù or ‚Äúresponse_error‚Äù</li>
<li><code>status_code</code> the status code of the response</li>
<li><code>body</code> the body of the response</li>
<li><code>json</code> the parsed JSON response (if response body was JSON)</li>
<li><code>json.[key]</code> sub-elements of the parsed JSON response</li>
<li><code>request</code> the raw request made, including headers</li>
<li><code>response</code> the raw response received, including headers</li>
</ul>
<h3 id="examples-7">Examples</h3>
<pre><code>@run.webhook.status_code ‚Üí 200
@run.webhook.json.results.0.state_name ‚Üí Washington</code></pre>
</div>
<h1 id="template-functions">Template Functions</h1>
<p>In addition to simple substitutions, flows also have access to a set of functions which can be used in templates to further manipulate the context. Functions are called using the <code>@(function_name(args..))</code> syntax. For example, to title case a contact‚Äôs name in a message, you can use <code>@(title(contact.name))</code>. Context variables referred to within functions do not need a leading <code>@</code>. Functions can also use literal numbers or strings as arguments, for example <code>@(length(split(&quot;1 2 3&quot;, &quot; &quot;))</code>.</p>
<div class="excellent_functions">
<p><a name="functions:length"></a></p>
<h2 id="lengthobject">length(object)</h2>
<p>length returns the length of the passed in string or array.</p>
<p>length will return an error if it is passed an item which doesn‚Äôt have length.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb16-1" data-line-number="1">@(length(SPLIT(<span class="st">&quot;1 2 3&quot;</span>, <span class="st">&quot; &quot;</span>))) -&gt; <span class="dv">3</span></a>
<a class="sourceLine" id="cb16-2" data-line-number="2">@(length(<span class="st">&quot;Hello&quot;</span>)) -&gt; <span class="dv">5</span></a>
<a class="sourceLine" id="cb16-3" data-line-number="3">@(length(<span class="st">&quot;üòÄüòÉüòÑüòÅ&quot;</span>)) -&gt; <span class="dv">4</span></a>
<a class="sourceLine" id="cb16-4" data-line-number="4">@(length(<span class="dv">1234</span>)) -&gt; ERROR</a></code></pre></div>
<p><a name="functions:default"></a></p>
<h2 id="defaulttest-default">default(test, default)</h2>
<p>default takes two arguments, returning <code>test</code> if not an error or nil, otherwise returning <code>default</code></p>
<div class="sourceCode" id="cb17"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb17-1" data-line-number="1">@(<span class="kw">default</span>(undeclared.var, <span class="st">&quot;default_value&quot;</span>)) -&gt; default_value</a>
<a class="sourceLine" id="cb17-2" data-line-number="2">@(<span class="kw">default</span>(<span class="st">&quot;10&quot;</span>, <span class="st">&quot;20&quot;</span>)) -&gt; <span class="dv">10</span></a>
<a class="sourceLine" id="cb17-3" data-line-number="3">@(<span class="kw">default</span>(date(<span class="st">&quot;invalid-date&quot;</span>), <span class="st">&quot;today&quot;</span>)) -&gt; today</a></code></pre></div>
<p><a name="functions:array"></a></p>
<h2 id="arrayvalues">array(values‚Ä¶)</h2>
<p>array takes a list of <code>values</code> and returns them as an array</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb18-1" data-line-number="1">@(array(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="dv">356</span>)[<span class="dv">1</span>]) -&gt; <span class="st">&quot;b&quot;</span></a>
<a class="sourceLine" id="cb18-2" data-line-number="2">@(join(array(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>), <span class="st">&quot;|&quot;</span>)) -&gt; <span class="st">&quot;a|b|c&quot;</span></a>
<a class="sourceLine" id="cb18-3" data-line-number="3">@(length(array())) -&gt; <span class="st">&quot;0&quot;</span></a>
<a class="sourceLine" id="cb18-4" data-line-number="4">@(length(array(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>))) -&gt; <span class="st">&quot;2&quot;</span></a></code></pre></div>
<p><a name="functions:from_json"></a></p>
<h2 id="from_jsonstring">from_json(string)</h2>
<p>from_json tries to parse <code>string</code> as JSON, returning a fragment you can index into</p>
<p>If the passed in value is not JSON, then an error is returned</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb19-1" data-line-number="1">@(from_json(<span class="st">&quot;[1,2,3,4]&quot;</span>).<span class="dv">2</span>) -&gt; <span class="dv">3</span></a>
<a class="sourceLine" id="cb19-2" data-line-number="2">@(from_json(<span class="st">&quot;invalid json&quot;</span>)) -&gt; ERROR</a></code></pre></div>
<p><a name="functions:to_json"></a></p>
<h2 id="to_jsonvalue">to_json(value)</h2>
<p>to_json tries to return a JSON representation of <code>value</code>. An error is returned if there is no JSON representation of that object.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb20-1" data-line-number="1">@(to_json(<span class="st">&quot;string&quot;</span>)) -&gt; <span class="st">&quot;string&quot;</span></a>
<a class="sourceLine" id="cb20-2" data-line-number="2">@(to_json(<span class="dv">10</span>)) -&gt; <span class="dv">10</span></a>
<a class="sourceLine" id="cb20-3" data-line-number="3">@(to_json(contact.uuid)) -&gt; <span class="st">&quot;ce2b5142-453b-4e43-868e-abdafafaa878&quot;</span></a>
<a class="sourceLine" id="cb20-4" data-line-number="4">@(to_json(now())) -&gt; <span class="st">&quot;2017-05-10T12:50:00.000000-07:00&quot;</span></a></code></pre></div>
<p><a name="functions:url_encode"></a></p>
<h2 id="url_encodestring">url_encode(string)</h2>
<p>url_encode URL encodes <code>string</code> for use in a URL parameter</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb21-1" data-line-number="1">@(url_encode(<span class="st">&quot;two words&quot;</span>)) -&gt; two+words</a>
<a class="sourceLine" id="cb21-2" data-line-number="2">@(url_encode(<span class="dv">10</span>)) -&gt; <span class="dv">10</span></a></code></pre></div>
<p><a name="functions:and"></a></p>
<h2 id="andtests">and(tests‚Ä¶)</h2>
<p>and returns whether all the passed in arguments are truthy</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb22-1" data-line-number="1">@(and(true)) -&gt; true</a>
<a class="sourceLine" id="cb22-2" data-line-number="2">@(and(true, false, true)) -&gt; false</a></code></pre></div>
<p><a name="functions:or"></a></p>
<h2 id="ortests">or(tests‚Ä¶)</h2>
<p>or returns whether if any of the passed in arguments are truthy</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb23-1" data-line-number="1">@(or(true)) -&gt; true</a>
<a class="sourceLine" id="cb23-2" data-line-number="2">@(or(true, false, true)) -&gt; true</a></code></pre></div>
<p><a name="functions:if"></a></p>
<h2 id="iftest-true_value-false_value">if(test, true_value, false_value)</h2>
<p>if evaluates the <code>test</code> argument, and if truthy returns <code>true_value</code>, if not returning <code>false_value</code></p>
<p>If the first argument is an error that error is returned</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb24-1" data-line-number="1">@(<span class="kw">if</span>(<span class="dv">1</span> = <span class="dv">1</span>, <span class="st">&quot;foo&quot;</span>, <span class="st">&quot;bar&quot;</span>)) -&gt; <span class="st">&quot;foo&quot;</span></a>
<a class="sourceLine" id="cb24-2" data-line-number="2">@(<span class="kw">if</span>(<span class="st">&quot;foo&quot;</span> &gt; <span class="st">&quot;bar&quot;</span>, <span class="st">&quot;foo&quot;</span>, <span class="st">&quot;bar&quot;</span>)) -&gt; ERROR</a></code></pre></div>
<p><a name="functions:abs"></a></p>
<h2 id="absnum">abs(num)</h2>
<p>abs returns the absolute value of <code>num</code></p>
<div class="sourceCode" id="cb25"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb25-1" data-line-number="1">@(abs(-<span class="dv">10</span>)) -&gt; <span class="dv">10</span></a>
<a class="sourceLine" id="cb25-2" data-line-number="2">@(abs(<span class="fl">10.5</span>)) -&gt; <span class="fl">10.5</span></a>
<a class="sourceLine" id="cb25-3" data-line-number="3">@(abs(<span class="st">&quot;foo&quot;</span>)) -&gt; ERROR</a></code></pre></div>
<p><a name="functions:round"></a></p>
<h2 id="roundnum-places">round(num [,places])</h2>
<p>round rounds <code>num</code> to the nearest value. You can optionally pass in the number of decimal places to round to as <code>places</code>.</p>
<p>If places &lt; 0, it will round the integer part to the nearest 10^(-places).</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb26-1" data-line-number="1">@(round(<span class="fl">12.141</span>)) -&gt; <span class="dv">12</span></a>
<a class="sourceLine" id="cb26-2" data-line-number="2">@(round(<span class="fl">12.6</span>)) -&gt; <span class="dv">13</span></a>
<a class="sourceLine" id="cb26-3" data-line-number="3">@(round(<span class="fl">12.141</span>, <span class="dv">2</span>)) -&gt; <span class="fl">12.14</span></a>
<a class="sourceLine" id="cb26-4" data-line-number="4">@(round(<span class="fl">12.146</span>, <span class="dv">2</span>)) -&gt; <span class="fl">12.15</span></a>
<a class="sourceLine" id="cb26-5" data-line-number="5">@(round(<span class="fl">12.146</span>, <span class="dv">-1</span>)) -&gt; <span class="dv">10</span></a>
<a class="sourceLine" id="cb26-6" data-line-number="6">@(round(<span class="st">&quot;notnum&quot;</span>, <span class="dv">2</span>)) -&gt; ERROR</a></code></pre></div>
<p><a name="functions:round_up"></a></p>
<h2 id="round_upnum">round_up(num)</h2>
<p>round_up rounds <code>num</code> up to the nearest integer value, also good at fighting weeds</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb27-1" data-line-number="1">@(round_up(<span class="fl">12.141</span>)) -&gt; <span class="dv">13</span></a>
<a class="sourceLine" id="cb27-2" data-line-number="2">@(round_up(<span class="dv">12</span>)) -&gt; <span class="dv">12</span></a>
<a class="sourceLine" id="cb27-3" data-line-number="3">@(round_up(<span class="st">&quot;foo&quot;</span>)) -&gt; ERROR</a></code></pre></div>
<p><a name="functions:round_down"></a></p>
<h2 id="round_downnum">round_down(num)</h2>
<p>round_down rounds <code>num</code> down to the nearest integer value</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb28-1" data-line-number="1">@(round_down(<span class="fl">12.141</span>)) -&gt; <span class="dv">12</span></a>
<a class="sourceLine" id="cb28-2" data-line-number="2">@(round_down(<span class="fl">12.9</span>)) -&gt; <span class="dv">12</span></a>
<a class="sourceLine" id="cb28-3" data-line-number="3">@(round_down(<span class="st">&quot;foo&quot;</span>)) -&gt; ERROR</a></code></pre></div>
<p><a name="functions:max"></a></p>
<h2 id="maxvalues">max(values‚Ä¶)</h2>
<p>max takes a list of <code>values</code> and returns the greatest of them</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb29-1" data-line-number="1">@(max(<span class="dv">1</span>, <span class="dv">2</span>)) -&gt; <span class="dv">2</span></a>
<a class="sourceLine" id="cb29-2" data-line-number="2">@(max(<span class="dv">1</span>, <span class="dv">-1</span>, <span class="dv">10</span>)) -&gt; <span class="dv">10</span></a>
<a class="sourceLine" id="cb29-3" data-line-number="3">@(max(<span class="dv">1</span>, <span class="dv">10</span>, <span class="st">&quot;foo&quot;</span>)) -&gt; ERROR</a></code></pre></div>
<p><a name="functions:min"></a></p>
<h2 id="minvalues">min(values)</h2>
<p>min takes a list of <code>values</code> and returns the smallest of them</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb30-1" data-line-number="1">@(min(<span class="dv">1</span>, <span class="dv">2</span>)) -&gt; <span class="dv">1</span></a>
<a class="sourceLine" id="cb30-2" data-line-number="2">@(min(<span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">-10</span>)) -&gt; <span class="dv">-10</span></a>
<a class="sourceLine" id="cb30-3" data-line-number="3">@(min(<span class="dv">1</span>, <span class="dv">2</span>, <span class="st">&quot;foo&quot;</span>)) -&gt; ERROR</a></code></pre></div>
<p><a name="functions:mean"></a></p>
<h2 id="meanvalues">mean(values)</h2>
<p>mean takes a list of <code>values</code> and returns the arithmetic mean of them</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb31-1" data-line-number="1">@(mean(<span class="dv">1</span>, <span class="dv">2</span>)) -&gt; <span class="fl">1.5</span></a>
<a class="sourceLine" id="cb31-2" data-line-number="2">@(mean(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">6</span>)) -&gt; <span class="dv">3</span></a>
<a class="sourceLine" id="cb31-3" data-line-number="3">@(mean(<span class="dv">1</span>, <span class="st">&quot;foo&quot;</span>)) -&gt; ERROR</a></code></pre></div>
<p><a name="functions:mod"></a></p>
<h2 id="moddividend-divisor">mod(dividend, divisor)</h2>
<p>mod returns the remainder of the division of <code>divident</code> by <code>divisor</code></p>
<div class="sourceCode" id="cb32"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb32-1" data-line-number="1">@(mod(<span class="dv">5</span>, <span class="dv">2</span>)) -&gt; <span class="dv">1</span></a>
<a class="sourceLine" id="cb32-2" data-line-number="2">@(mod(<span class="dv">4</span>, <span class="dv">2</span>)) -&gt; <span class="dv">0</span></a>
<a class="sourceLine" id="cb32-3" data-line-number="3">@(mod(<span class="dv">5</span>, <span class="st">&quot;foo&quot;</span>)) -&gt; ERROR</a></code></pre></div>
<p><a name="functions:rand"></a></p>
<h2 id="randfloor-ceiling">rand(floor, ceiling)</h2>
<p>rand returns either a single random decimal between 0-1 or a random integer between <code>floor</code> and <code>ceiling</code> (inclusive)</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb33-1" data-line-number="1">@(rand()) == <span class="fl">0.5152</span></a>
<a class="sourceLine" id="cb33-2" data-line-number="2">@(rand(<span class="dv">1</span>, <span class="dv">5</span>)) == <span class="dv">3</span></a></code></pre></div>
<p><a name="functions:format_num"></a></p>
<h2 id="format_numnum-places-commas">format_num(num, places, commas)</h2>
<p>format_num returns <code>num</code> formatted with the passed in number of decimal <code>places</code> and optional <code>commas</code> dividing thousands separators</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb34-1" data-line-number="1">@(format_num(<span class="dv">31337</span>, <span class="dv">2</span>, true)) -&gt; <span class="st">&quot;31,337.00&quot;</span></a>
<a class="sourceLine" id="cb34-2" data-line-number="2">@(format_num(<span class="dv">31337</span>, <span class="dv">0</span>, false)) -&gt; <span class="st">&quot;31337&quot;</span></a>
<a class="sourceLine" id="cb34-3" data-line-number="3">@(format_num(<span class="st">&quot;foo&quot;</span>, <span class="dv">2</span>, false)) -&gt; ERROR</a></code></pre></div>
<p><a name="functions:read_code"></a></p>
<h2 id="read_codecode">read_code(code)</h2>
<p>read_code converts <code>code</code> into something that can be read by IVR systems</p>
<p>ReadCode will split the numbers such as they are easier to understand. This includes splitting in 3s or 4s if appropriate.</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb35-1" data-line-number="1">@(read_code(<span class="st">&quot;1234&quot;</span>)) -&gt; <span class="st">&quot;1 2 3 4&quot;</span></a>
<a class="sourceLine" id="cb35-2" data-line-number="2">@(read_code(<span class="st">&quot;abc&quot;</span>)) -&gt; <span class="st">&quot;a b c&quot;</span></a>
<a class="sourceLine" id="cb35-3" data-line-number="3">@(read_code(<span class="st">&quot;abcdef&quot;</span>)) -&gt; <span class="st">&quot;a b c , d e f&quot;</span></a></code></pre></div>
<p><a name="functions:code"></a></p>
<h2 id="codestring">code(string)</h2>
<p>code returns the numeric code for the first character in <code>string</code>, it is the inverse of char</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb36-1" data-line-number="1">@(code(<span class="st">&quot;a&quot;</span>)) -&gt; <span class="st">&quot;97&quot;</span></a>
<a class="sourceLine" id="cb36-2" data-line-number="2">@(code(<span class="st">&quot;abc&quot;</span>)) -&gt; <span class="st">&quot;97&quot;</span></a>
<a class="sourceLine" id="cb36-3" data-line-number="3">@(code(<span class="st">&quot;üòÄ&quot;</span>)) -&gt; <span class="st">&quot;128512&quot;</span></a>
<a class="sourceLine" id="cb36-4" data-line-number="4">@(code(<span class="st">&quot;&quot;</span>)) -&gt; <span class="st">&quot;ERROR&quot;</span></a>
<a class="sourceLine" id="cb36-5" data-line-number="5">@(code(<span class="st">&quot;15&quot;</span>)) -&gt; <span class="st">&quot;49&quot;</span></a>
<a class="sourceLine" id="cb36-6" data-line-number="6">@(code(<span class="dv">15</span>)) -&gt; <span class="st">&quot;49&quot;</span></a></code></pre></div>
<p><a name="functions:split"></a></p>
<h2 id="splitstring-delimeter">split(string, delimeter)</h2>
<p>split splits <code>string</code> based on the passed in <code>delimeter</code></p>
<p>Empty values are removed from the returned list</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb37-1" data-line-number="1">@(split(<span class="st">&quot;a b c&quot;</span>, <span class="st">&quot; &quot;</span>)) -&gt; <span class="st">&quot;a, b, c&quot;</span></a>
<a class="sourceLine" id="cb37-2" data-line-number="2">@(split(<span class="st">&quot;a&quot;</span>, <span class="st">&quot; &quot;</span>)) -&gt; <span class="st">&quot;a&quot;</span></a>
<a class="sourceLine" id="cb37-3" data-line-number="3">@(split(<span class="st">&quot;abc..d&quot;</span>, <span class="st">&quot;.&quot;</span>)) -&gt; <span class="st">&quot;abc, d&quot;</span></a>
<a class="sourceLine" id="cb37-4" data-line-number="4">@(split(<span class="st">&quot;a.b.c.&quot;</span>, <span class="st">&quot;.&quot;</span>)) -&gt; <span class="st">&quot;a, b, c&quot;</span></a>
<a class="sourceLine" id="cb37-5" data-line-number="5">@(split(<span class="st">&quot;a &amp;&amp; b &amp;&amp; c&quot;</span>, <span class="st">&quot; &amp;&amp; &quot;</span>)) -&gt; <span class="st">&quot;a, b, c&quot;</span></a></code></pre></div>
<p><a name="functions:join"></a></p>
<h2 id="joinarray-delimeter">join(array, delimeter)</h2>
<p>join joins the passed in <code>array</code> of strings with the passed in <code>delimeter</code></p>
<div class="sourceCode" id="cb38"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb38-1" data-line-number="1">@(join(array(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>), <span class="st">&quot;|&quot;</span>)) -&gt; <span class="st">&quot;a|b|c&quot;</span></a>
<a class="sourceLine" id="cb38-2" data-line-number="2">@(join(split(<span class="st">&quot;a.b.c&quot;</span>, <span class="st">&quot;.&quot;</span>), <span class="st">&quot; &quot;</span>)) -&gt; <span class="st">&quot;a b c&quot;</span></a></code></pre></div>
<p><a name="functions:char"></a></p>
<h2 id="charnum">char(num)</h2>
<p>char returns the rune for the passed in codepoint, <code>num</code>, which may be unicode, this is the reverse of code</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb39-1" data-line-number="1">@(<span class="dt">char</span>(<span class="dv">33</span>)) -&gt; <span class="st">&quot;!&quot;</span></a>
<a class="sourceLine" id="cb39-2" data-line-number="2">@(<span class="dt">char</span>(<span class="dv">128512</span>)) -&gt; <span class="st">&quot;üòÄ&quot;</span></a>
<a class="sourceLine" id="cb39-3" data-line-number="3">@(<span class="dt">char</span>(<span class="st">&quot;foo&quot;</span>)) -&gt; ERROR</a></code></pre></div>
<p><a name="functions:title"></a></p>
<h2 id="titlestring">title(string)</h2>
<p>title titlecases the passed in <code>string</code>, capitalizing each word</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb40-1" data-line-number="1">@(title(<span class="st">&quot;foo&quot;</span>)) -&gt; <span class="st">&quot;Foo&quot;</span></a>
<a class="sourceLine" id="cb40-2" data-line-number="2">@(title(<span class="st">&quot;ryan lewis&quot;</span>)) -&gt; <span class="st">&quot;Ryan Lewis&quot;</span></a>
<a class="sourceLine" id="cb40-3" data-line-number="3">@(title(<span class="dv">123</span>)) -&gt; <span class="st">&quot;123&quot;</span></a></code></pre></div>
<p><a name="functions:word"></a></p>
<h2 id="wordstring-offset">word(string, offset)</h2>
<p>word returns the word at the passed in <code>offset</code> for the passed in <code>string</code></p>
<div class="sourceCode" id="cb41"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb41-1" data-line-number="1">@(word(<span class="st">&quot;foo bar&quot;</span>, <span class="dv">0</span>)) -&gt; <span class="st">&quot;foo&quot;</span></a>
<a class="sourceLine" id="cb41-2" data-line-number="2">@(word(<span class="st">&quot;foo.bar&quot;</span>, <span class="dv">0</span>)) -&gt; <span class="st">&quot;foo&quot;</span></a>
<a class="sourceLine" id="cb41-3" data-line-number="3">@(word(<span class="st">&quot;one two.three&quot;</span>, <span class="dv">2</span>)) -&gt; <span class="st">&quot;three&quot;</span></a></code></pre></div>
<p><a name="functions:remove_first_word"></a></p>
<h2 id="remove_first_wordstring">remove_first_word(string)</h2>
<p>remove_first_word removes the 1st word of <code>string</code></p>
<div class="sourceCode" id="cb42"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb42-1" data-line-number="1">@(remove_first_word(<span class="st">&quot;foo bar&quot;</span>)) -&gt; <span class="st">&quot;bar&quot;</span></a></code></pre></div>
<p><a name="functions:word_slice"></a></p>
<h2 id="word_slicestring-start-end">word_slice(string, start, end)</h2>
<p>word_slice extracts a substring from <code>string</code> spanning from <code>start</code> up to but not-including <code>end</code>. (first word is 1)</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb43-1" data-line-number="1">@(word_slice(<span class="st">&quot;foo bar&quot;</span>, <span class="dv">1</span>, <span class="dv">1</span>)) -&gt; <span class="st">&quot;foo&quot;</span></a>
<a class="sourceLine" id="cb43-2" data-line-number="2">@(word_slice(<span class="st">&quot;foo bar&quot;</span>, <span class="dv">1</span>, <span class="dv">3</span>)) -&gt; <span class="st">&quot;foo bar&quot;</span></a>
<a class="sourceLine" id="cb43-3" data-line-number="3">@(word_slice(<span class="st">&quot;foo bar&quot;</span>, <span class="dv">3</span>, <span class="dv">4</span>)) -&gt; <span class="st">&quot;&quot;</span></a></code></pre></div>
<p><a name="functions:word_count"></a></p>
<h2 id="word_countstring">word_count(string)</h2>
<p>word_count returns the number of words in <code>string</code></p>
<div class="sourceCode" id="cb44"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb44-1" data-line-number="1">@(word_count(<span class="st">&quot;foo bar&quot;</span>)) -&gt; <span class="dv">2</span></a>
<a class="sourceLine" id="cb44-2" data-line-number="2">@(word_count(<span class="dv">10</span>)) -&gt; <span class="dv">1</span></a>
<a class="sourceLine" id="cb44-3" data-line-number="3">@(word_count(<span class="st">&quot;&quot;</span>)) -&gt; <span class="dv">0</span></a>
<a class="sourceLine" id="cb44-4" data-line-number="4">@(word_count(<span class="st">&quot;üòÄüòÉüòÑüòÅ&quot;</span>)) -&gt; <span class="dv">4</span></a></code></pre></div>
<p><a name="functions:field"></a></p>
<h2 id="fieldstring-offset-delimeter">field(string, offset, delimeter)</h2>
<p>field splits <code>string</code> based on the passed in <code>delimiter</code> and returns the field at <code>offset</code>. When splitting with a space, the delimiter is considered to be all whitespace. (first field is 0)</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb45-1" data-line-number="1">@(field(<span class="st">&quot;a,b,c&quot;</span>, <span class="dv">1</span>, <span class="st">&quot;,&quot;</span>)) -&gt; <span class="st">&quot;b&quot;</span></a>
<a class="sourceLine" id="cb45-2" data-line-number="2">@(field(<span class="st">&quot;a,,b,c&quot;</span>, <span class="dv">1</span>, <span class="st">&quot;,&quot;</span>)) -&gt; <span class="st">&quot;&quot;</span></a>
<a class="sourceLine" id="cb45-3" data-line-number="3">@(field(<span class="st">&quot;a   b c&quot;</span>, <span class="dv">1</span>, <span class="st">&quot; &quot;</span>)) -&gt; <span class="st">&quot;b&quot;</span></a>
<a class="sourceLine" id="cb45-4" data-line-number="4">@(field(<span class="st">&quot;a      b   c   d&quot;</span>, <span class="dv">1</span>, <span class="st">&quot;    &quot;</span>)) -&gt; <span class="st">&quot;&quot;</span></a>
<a class="sourceLine" id="cb45-5" data-line-number="5">@(field(<span class="st">&quot;a</span><span class="sc">\t\t</span><span class="st">b</span><span class="sc">\t</span><span class="st">c</span><span class="sc">\t</span><span class="st">d&quot;</span>, <span class="dv">1</span>, <span class="st">&quot; &quot;</span>)) -&gt; <span class="st">&quot;&quot;</span></a>
<a class="sourceLine" id="cb45-6" data-line-number="6">@(field(<span class="st">&quot;a,b,c&quot;</span>, <span class="st">&quot;foo&quot;</span>, <span class="st">&quot;,&quot;</span>)) -&gt; ERROR</a></code></pre></div>
<p><a name="functions:clean"></a></p>
<h2 id="cleanstring">clean(string)</h2>
<p>clean strips any leading or trailing whitespace from `string``</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb46-1" data-line-number="1">@(clean(<span class="st">&quot;</span><span class="sc">\n</span><span class="st">foo</span><span class="sc">\t</span><span class="st">&quot;</span>)) -&gt; <span class="st">&quot;foo&quot;</span></a>
<a class="sourceLine" id="cb46-2" data-line-number="2">@(clean(<span class="st">&quot; bar&quot;</span>)) -&gt; <span class="st">&quot;bar&quot;</span></a>
<a class="sourceLine" id="cb46-3" data-line-number="3">@(clean(<span class="dv">123</span>)) -&gt; <span class="st">&quot;123&quot;</span></a></code></pre></div>
<p><a name="functions:left"></a></p>
<h2 id="leftstring-len">left(string, len)</h2>
<p>left returns the <code>len</code> most left characters of the passed in <code>string</code></p>
<div class="sourceCode" id="cb47"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb47-1" data-line-number="1">@(left(<span class="st">&quot;hello&quot;</span>, <span class="dv">2</span>)) -&gt; <span class="st">&quot;he&quot;</span></a>
<a class="sourceLine" id="cb47-2" data-line-number="2">@(left(<span class="st">&quot;hello&quot;</span>, <span class="dv">7</span>)) -&gt; <span class="st">&quot;hello&quot;</span></a>
<a class="sourceLine" id="cb47-3" data-line-number="3">@(left(<span class="st">&quot;üòÄüòÉüòÑüòÅ&quot;</span>, <span class="dv">2</span>)) -&gt; <span class="st">&quot;üòÄüòÉ&quot;</span></a>
<a class="sourceLine" id="cb47-4" data-line-number="4">@(left(<span class="st">&quot;hello&quot;</span>, <span class="dv">-1</span>)) -&gt; ERROR</a></code></pre></div>
<p><a name="functions:lower"></a></p>
<h2 id="lowerstring">lower(string)</h2>
<p>lower lowercases the passed in <code>string</code></p>
<div class="sourceCode" id="cb48"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb48-1" data-line-number="1">@(lower(<span class="st">&quot;HellO&quot;</span>)) -&gt; <span class="st">&quot;hello&quot;</span></a>
<a class="sourceLine" id="cb48-2" data-line-number="2">@(lower(<span class="st">&quot;hello&quot;</span>)) -&gt; <span class="st">&quot;hello&quot;</span></a>
<a class="sourceLine" id="cb48-3" data-line-number="3">@(lower(<span class="st">&quot;123&quot;</span>)) -&gt; <span class="st">&quot;123&quot;</span></a>
<a class="sourceLine" id="cb48-4" data-line-number="4">@(lower(<span class="st">&quot;üòÄ&quot;</span>)) -&gt; <span class="st">&quot;üòÄ&quot;</span></a></code></pre></div>
<p><a name="functions:right"></a></p>
<h2 id="rightstring-len">right(string, len)</h2>
<p>right returns the <code>len</code> most right characters of the passed in <code>string</code></p>
<div class="sourceCode" id="cb49"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb49-1" data-line-number="1">@(right(<span class="st">&quot;hello&quot;</span>, <span class="dv">2</span>)) -&gt; <span class="st">&quot;lo&quot;</span></a>
<a class="sourceLine" id="cb49-2" data-line-number="2">@(right(<span class="st">&quot;hello&quot;</span>, <span class="dv">7</span>)) -&gt; <span class="st">&quot;hello&quot;</span></a>
<a class="sourceLine" id="cb49-3" data-line-number="3">@(right(<span class="st">&quot;üòÄüòÉüòÑüòÅ&quot;</span>, <span class="dv">2</span>)) -&gt; <span class="st">&quot;üòÑüòÅ&quot;</span></a>
<a class="sourceLine" id="cb49-4" data-line-number="4">@(right(<span class="st">&quot;hello&quot;</span>, <span class="dv">-1</span>)) -&gt; ERROR</a></code></pre></div>
<p><a name="functions:string_cmp"></a></p>
<h2 id="string_cmpstr1-str2">string_cmp(str1, str2)</h2>
<p>string_cmp returns the comparison between the strings <code>str1</code> and <code>str2</code>. The return value will be -1 if str1 is smaller than str2, 0 if they are equal and 1 if str1 is greater than str2</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb50-1" data-line-number="1">@(string_cmp(<span class="st">&quot;abc&quot;</span>, <span class="st">&quot;abc&quot;</span>)) -&gt; <span class="dv">0</span></a>
<a class="sourceLine" id="cb50-2" data-line-number="2">@(string_cmp(<span class="st">&quot;abc&quot;</span>, <span class="st">&quot;def&quot;</span>)) -&gt; <span class="dv">-1</span></a>
<a class="sourceLine" id="cb50-3" data-line-number="3">@(string_cmp(<span class="st">&quot;zzz&quot;</span>, <span class="st">&quot;aaa&quot;</span>)) -&gt; <span class="dv">1</span></a></code></pre></div>
<p><a name="functions:repeat"></a></p>
<h2 id="repeatstring-count">repeat(string, count)</h2>
<p>repeat return <code>string</code> repeated <code>count</code> number of times</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb51-1" data-line-number="1">@(repeat(<span class="st">&quot;*&quot;</span>, <span class="dv">8</span>)) -&gt; <span class="st">&quot;********&quot;</span></a>
<a class="sourceLine" id="cb51-2" data-line-number="2">@(repeat(<span class="st">&quot;*&quot;</span>, <span class="st">&quot;foo&quot;</span>)) -&gt; ERROR</a></code></pre></div>
<p><a name="functions:replace"></a></p>
<h2 id="replacestring-needle-replacement">replace(string, needle, replacement)</h2>
<p>replace replaces all occurrences of <code>needle</code> with <code>replacement</code> in <code>string</code></p>
<div class="sourceCode" id="cb52"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb52-1" data-line-number="1">@(replace(<span class="st">&quot;foo bar&quot;</span>, <span class="st">&quot;foo&quot;</span>, <span class="st">&quot;zap&quot;</span>)) -&gt; <span class="st">&quot;zap bar&quot;</span></a>
<a class="sourceLine" id="cb52-2" data-line-number="2">@(replace(<span class="st">&quot;foo bar&quot;</span>, <span class="st">&quot;baz&quot;</span>, <span class="st">&quot;zap&quot;</span>)) -&gt; <span class="st">&quot;foo bar&quot;</span></a></code></pre></div>
<p><a name="functions:upper"></a></p>
<h2 id="upperstring">upper(string)</h2>
<p>upper uppercases all characters in the passed <code>string</code></p>
<div class="sourceCode" id="cb53"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb53-1" data-line-number="1">@(upper(<span class="st">&quot;Asdf&quot;</span>)) -&gt; <span class="st">&quot;ASDF&quot;</span></a>
<a class="sourceLine" id="cb53-2" data-line-number="2">@(upper(<span class="dv">123</span>)) -&gt; <span class="st">&quot;123&quot;</span></a></code></pre></div>
<p><a name="functions:percent"></a></p>
<h2 id="percentnum">percent(num)</h2>
<p>percent converts <code>num</code> to a string represented as a percentage</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb54-1" data-line-number="1">@(percent(<span class="fl">0.54234</span>)) -&gt; <span class="st">&quot;54%&quot;</span></a>
<a class="sourceLine" id="cb54-2" data-line-number="2">@(percent(<span class="fl">1.2</span>)) -&gt; <span class="st">&quot;120%&quot;</span></a>
<a class="sourceLine" id="cb54-3" data-line-number="3">@(percent(<span class="st">&quot;foo&quot;</span>)) -&gt; ERROR</a></code></pre></div>
<p><a name="functions:parse_date"></a></p>
<h2 id="parse_datestring-format-timezone">parse_date(string, format [,timezone])</h2>
<p>parse_date turns <code>string</code> into a date according to the <code>format</code> and optional <code>timezone</code> specified</p>
<p>The format string can consist of the following characters. The characters ‚Äò‚Äô, ‚Äò:‚Äô, ‚Äò,‚Äô, ‚ÄòT‚Äô, ‚Äò-‚Äô and ‚Äô_‚Äô are ignored. Any other character is an error.</p>
<ul>
<li><code>YY</code> - last two digits of year 0-99</li>
<li><code>YYYY</code> - four digits of your 0000-9999</li>
<li><code>M</code> - month 1-12</li>
<li><code>MM</code> - month 01-12</li>
<li><code>D</code> - day of month, 1-31</li>
<li><code>DD</code> - day of month, zero padded 0-31</li>
<li><code>h</code> - hour of the day 1-12</li>
<li><code>hh</code> - hour of the day 01-12</li>
<li><code>tt</code> - twenty four hour of the day 01-23</li>
<li><code>m</code> - minute 0-59</li>
<li><code>mm</code> - minute 00-59</li>
<li><code>s</code> - second 0-59</li>
<li><code>ss</code> - second 00-59</li>
<li><code>fff</code> - milliseconds</li>
<li><code>ffffff</code> - microseconds</li>
<li><code>fffffffff</code> - nanoseconds</li>
<li><code>aa</code> - am or pm</li>
<li><code>AA</code> - AM or PM</li>
<li><code>Z</code> - hour and minute offset from UTC, or Z for UTC</li>
<li><code>ZZZ</code> - hour and minute offset from UTC</li>
</ul>
<p>Timezone should be a location name as specified in the IANA Time Zone database, such as ‚ÄúAmerica/Guayaquil‚Äù or ‚ÄúAmerica/Los_Angeles‚Äù. If not specified the timezone of your environment will be used. An error will be returned if the timezone is not recognized.</p>
<p>Note that fractional seconds will be parsed even without an explicit format identifier. You should only specify fractional seconds when you want to assert the number of places in the input format.</p>
<p>parse_date will return an error if it is unable to convert the string to a date.</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb55-1" data-line-number="1">@(parse_date(<span class="st">&quot;1979-07-18&quot;</span>, <span class="st">&quot;YYYY-MM-DD&quot;</span>)) -&gt; <span class="dv">1979-07</span>-18T00:<span class="dv">00</span>:<span class="fl">00.000000</span>Z</a>
<a class="sourceLine" id="cb55-2" data-line-number="2">@(parse_date(<span class="st">&quot;2010 5 10&quot;</span>, <span class="st">&quot;YYYY M DD&quot;</span>)) -&gt; <span class="dv">2010-05</span>-10T00:<span class="dv">00</span>:<span class="fl">00.000000</span>Z</a>
<a class="sourceLine" id="cb55-3" data-line-number="3">@(parse_date(<span class="st">&quot;2010 5 10 12:50&quot;</span>, <span class="st">&quot;YYYY M DD tt:mm&quot;</span>, <span class="st">&quot;America/Los_Angeles&quot;</span>)) -&gt; <span class="dv">2010-05</span>-10T12:<span class="dv">50</span>:<span class="fl">00.000000</span><span class="dv">-07</span>:<span class="dv">00</span></a>
<a class="sourceLine" id="cb55-4" data-line-number="4">@(parse_date(<span class="st">&quot;NOT DATE&quot;</span>, <span class="st">&quot;YYYY-MM-DD&quot;</span>)) -&gt; ERROR</a></code></pre></div>
<p><a name="functions:format_date"></a></p>
<h2 id="format_datedate-format-timezone">format_date(date, format [,timezone])</h2>
<p>format_date turns <code>date</code> into a string according to the <code>format</code> specified and in the optional <code>timezone</code>.</p>
<p>The format string can consist of the following characters. The characters ‚Äò‚Äô, ‚Äò:‚Äô, ‚Äò,‚Äô, ‚ÄòT‚Äô, ‚Äò-‚Äô and ‚Äô_‚Äô are ignored. Any other character is an error.</p>
<ul>
<li><code>YY</code> - last two digits of year 0-99</li>
<li><code>YYYY</code> - four digits of your 0000-9999</li>
<li><code>M</code> - month 1-12</li>
<li><code>MM</code> - month 01-12</li>
<li><code>D</code> - day of month, 1-31</li>
<li><code>DD</code> - day of month, zero padded 0-31</li>
<li><code>h</code> - hour of the day 1-12</li>
<li><code>hh</code> - hour of the day 01-12</li>
<li><code>tt</code> - twenty four hour of the day 01-23</li>
<li><code>m</code> - minute 0-59</li>
<li><code>mm</code> - minute 00-59</li>
<li><code>s</code> - second 0-59</li>
<li><code>ss</code> - second 00-59</li>
<li><code>fff</code> - milliseconds</li>
<li><code>ffffff</code> - microseconds</li>
<li><code>fffffffff</code> - nanoseconds</li>
<li><code>aa</code> - am or pm</li>
<li><code>AA</code> - AM or PM</li>
<li><code>Z</code> - hour and minute offset from UTC, or Z for UTC</li>
<li><code>ZZZ</code> - hour and minute offset from UTC</li>
</ul>
<p>Timezone should be a location name as specified in the IANA Time Zone database, such as ‚ÄúAmerica/Guayaquil‚Äù or ‚ÄúAmerica/Los_Angeles‚Äù. If not specified the timezone of your environment will be used. An error will be returned if the timezone is not recognized.</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb56-1" data-line-number="1">@(format_date(<span class="st">&quot;1979-07-18T15:00:00.000000Z&quot;</span>)) -&gt; <span class="dv">1979-07-18</span> <span class="dv">15</span>:<span class="dv">00</span></a>
<a class="sourceLine" id="cb56-2" data-line-number="2">@(format_date(<span class="st">&quot;1979-07-18T15:00:00.000000Z&quot;</span>, <span class="st">&quot;YYYY-MM-DD&quot;</span>)) -&gt; <span class="dv">1979-07-18</span></a>
<a class="sourceLine" id="cb56-3" data-line-number="3">@(format_date(<span class="st">&quot;2010-05-10T19:50:00.000000Z&quot;</span>, <span class="st">&quot;YYYY M DD tt:mm&quot;</span>)) -&gt; <span class="dv">2010</span> <span class="dv">5</span> <span class="dv">10</span> <span class="dv">19</span>:<span class="dv">50</span></a>
<a class="sourceLine" id="cb56-4" data-line-number="4">@(format_date(<span class="st">&quot;2010-05-10T19:50:00.000000Z&quot;</span>, <span class="st">&quot;YYYY-MM-DD tt:mm AA&quot;</span>, <span class="st">&quot;America/Los_Angeles&quot;</span>)) -&gt; <span class="dv">2010-05-10</span> <span class="dv">12</span>:<span class="dv">50</span> PM</a>
<a class="sourceLine" id="cb56-5" data-line-number="5">@(format_date(<span class="st">&quot;NOT DATE&quot;</span>, <span class="st">&quot;YYYY-MM-DD&quot;</span>)) -&gt; ERROR</a></code></pre></div>
<p><a name="functions:date"></a></p>
<h2 id="datestring">date(string)</h2>
<p>date turns <code>string</code> into a date according to the environment‚Äôs settings</p>
<p>date will return an error if it is unable to convert the string to a date.</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb57-1" data-line-number="1">@(date(<span class="st">&quot;1979-07-18&quot;</span>)) -&gt; <span class="dv">1979-07</span>-18T00:<span class="dv">00</span>:<span class="fl">00.000000</span>Z</a>
<a class="sourceLine" id="cb57-2" data-line-number="2">@(date(<span class="st">&quot;2010 05 10&quot;</span>)) -&gt; <span class="dv">2010-05</span>-10T00:<span class="dv">00</span>:<span class="fl">00.000000</span>Z</a>
<a class="sourceLine" id="cb57-3" data-line-number="3">@(date(<span class="st">&quot;NOT DATE&quot;</span>)) -&gt; ERROR</a></code></pre></div>
<p><a name="functions:date_from_parts"></a></p>
<h2 id="date_from_partsyear-month-day">date_from_parts(year, month, day)</h2>
<p>date_from_parts converts the passed in <code>year</code>, <code>month`` and</code>day`</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb58-1" data-line-number="1">@(date_from_parts(<span class="dv">2017</span>, <span class="dv">1</span>, <span class="dv">15</span>)) -&gt; <span class="dv">2017-01</span>-15T00:<span class="dv">00</span>:<span class="fl">00.000000</span>Z</a>
<a class="sourceLine" id="cb58-2" data-line-number="2">@(date_from_parts(<span class="dv">2017</span>, <span class="dv">2</span>, <span class="dv">31</span>)) -&gt; <span class="dv">2017-03</span>-03T00:<span class="dv">00</span>:<span class="fl">00.000000</span>Z</a>
<a class="sourceLine" id="cb58-3" data-line-number="3">@(date_from_parts(<span class="dv">2017</span>, <span class="dv">13</span>, <span class="dv">15</span>)) -&gt; ERROR</a></code></pre></div>
<p><a name="functions:date_diff"></a></p>
<h2 id="date_diffdate1-date2-unit">date_diff(date1, date2, unit)</h2>
<p>date_diff returns the integer duration between <code>date1</code> and <code>date2</code> in the <code>unit</code> specified.</p>
<p>Valid durations are ‚Äúy‚Äù for years, ‚ÄúM‚Äù for months, ‚Äúw‚Äù for weeks, ‚Äúd‚Äù for days, h&quot; for hour, ‚Äúm‚Äù for minutes, ‚Äús‚Äù for seconds</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb59-1" data-line-number="1">@(date_diff(<span class="st">&quot;2017-01-17&quot;</span>, <span class="st">&quot;2017-01-15&quot;</span>, <span class="st">&quot;d&quot;</span>)) -&gt; <span class="dv">2</span></a>
<a class="sourceLine" id="cb59-2" data-line-number="2">@(date_diff(<span class="st">&quot;2017-01-17 10:50&quot;</span>, <span class="st">&quot;2017-01-17 12:30&quot;</span>, <span class="st">&quot;h&quot;</span>)) -&gt; <span class="dv">-1</span></a>
<a class="sourceLine" id="cb59-3" data-line-number="3">@(date_diff(<span class="st">&quot;2017-01-17&quot;</span>, <span class="st">&quot;2015-12-17&quot;</span>, <span class="st">&quot;y&quot;</span>)) -&gt; <span class="dv">2</span></a></code></pre></div>
<p><a name="functions:date_add"></a></p>
<h2 id="date_adddate-offset-unit">date_add(date, offset, unit)</h2>
<p>date_add calculates the date value arrived at by adding <code>offset</code> number of <code>unit</code> to the <code>date</code></p>
<p>Valid durations are ‚Äúy‚Äù for years, ‚ÄúM‚Äù for months, ‚Äúw‚Äù for weeks, ‚Äúd‚Äù for days, h&quot; for hour, ‚Äúm‚Äù for minutes, ‚Äús‚Äù for seconds</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb60-1" data-line-number="1">@(date_add(<span class="st">&quot;2017-01-15&quot;</span>, <span class="dv">5</span>, <span class="st">&quot;d&quot;</span>)) -&gt; <span class="dv">2017-01</span>-20T00:<span class="dv">00</span>:<span class="fl">00.000000</span>Z</a>
<a class="sourceLine" id="cb60-2" data-line-number="2">@(date_add(<span class="st">&quot;2017-01-15 10:45&quot;</span>, <span class="dv">30</span>, <span class="st">&quot;m&quot;</span>)) -&gt; <span class="dv">2017-01</span>-15T11:<span class="dv">15</span>:<span class="fl">00.000000</span>Z</a></code></pre></div>
<p><a name="functions:weekday"></a></p>
<h2 id="weekdaydate">weekday(date)</h2>
<p>weekday returns the day of the week for <code>date</code>, 0 is sunday, 1 is monday..</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb61-1" data-line-number="1">@(weekday(<span class="st">&quot;2017-01-15&quot;</span>)) -&gt; <span class="dv">0</span></a>
<a class="sourceLine" id="cb61-2" data-line-number="2">@(weekday(<span class="st">&quot;foo&quot;</span>)) -&gt; ERROR</a></code></pre></div>
<p><a name="functions:tz"></a></p>
<h2 id="tzdate">tz(date)</h2>
<p>tz returns the timezone for `date``</p>
<p>If not timezone information is present in the date, then the environment‚Äôs timezone will be returned</p>
<div class="sourceCode" id="cb62"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb62-1" data-line-number="1">@(tz(<span class="st">&quot;2017-01-15 02:15:18PM UTC&quot;</span>)) -&gt; <span class="st">&quot;UTC&quot;</span></a>
<a class="sourceLine" id="cb62-2" data-line-number="2">@(tz(<span class="st">&quot;2017-01-15 02:15:18PM&quot;</span>)) -&gt; <span class="st">&quot;UTC&quot;</span></a>
<a class="sourceLine" id="cb62-3" data-line-number="3">@(tz(<span class="st">&quot;2017-01-15&quot;</span>)) -&gt; <span class="st">&quot;UTC&quot;</span></a>
<a class="sourceLine" id="cb62-4" data-line-number="4">@(tz(<span class="st">&quot;foo&quot;</span>)) -&gt; ERROR</a></code></pre></div>
<p><a name="functions:tz_offset"></a></p>
<h2 id="tz_offsetdate">tz_offset(date)</h2>
<p>tz_offset returns the offset for the timezone as a string +/- HHMM for <code>date</code></p>
<p>If no timezone information is present in the date, then the environment‚Äôs timezone offset will be returned</p>
<div class="sourceCode" id="cb63"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb63-1" data-line-number="1">@(tz_offset(<span class="st">&quot;2017-01-15 02:15:18PM UTC&quot;</span>)) -&gt; <span class="st">&quot;+0000&quot;</span></a>
<a class="sourceLine" id="cb63-2" data-line-number="2">@(tz_offset(<span class="st">&quot;2017-01-15 02:15:18PM&quot;</span>)) -&gt; <span class="st">&quot;+0000&quot;</span></a>
<a class="sourceLine" id="cb63-3" data-line-number="3">@(tz_offset(<span class="st">&quot;2017-01-15&quot;</span>)) -&gt; <span class="st">&quot;+0000&quot;</span></a>
<a class="sourceLine" id="cb63-4" data-line-number="4">@(tz_offset(<span class="st">&quot;foo&quot;</span>)) -&gt; ERROR</a></code></pre></div>
<p><a name="functions:today"></a></p>
<h2 id="today">today()</h2>
<p>today returns the current date in the current timezone, time is set to midnight in the environment timezone</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb64-1" data-line-number="1">@(today()) -&gt; <span class="dv">2017-01</span>-20T00:<span class="dv">00</span>:<span class="fl">00.000000</span>Z</a></code></pre></div>
<p><a name="functions:from_epoch"></a></p>
<h2 id="from_epochnum">from_epoch(num)</h2>
<p>from_epoch returns a new date created from <code>num</code> which represents number of nanoseconds since January 1st, 1970 GMT</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb65-1" data-line-number="1">@(from_epoch(<span class="dv">1497286619000000000</span>)) -&gt; <span class="dv">2017-06</span>-12T16:<span class="dv">56</span>:<span class="fl">59.000000</span>Z</a></code></pre></div>
<p><a name="functions:to_epoch"></a></p>
<h2 id="to_epochdate">to_epoch(date)</h2>
<p>to_epoch converts <code>date</code> to the number of nanoseconds since January 1st, 1970 GMT</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb66-1" data-line-number="1">@(to_epoch(<span class="st">&quot;2017-06-12T16:56:59.000000Z&quot;</span>)) -&gt; <span class="dv">1497286619000000000</span></a></code></pre></div>
<p><a name="functions:now"></a></p>
<h2 id="now">now()</h2>
<p>now returns the current date and time in the environment timezone</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb67-1" data-line-number="1">@(now()) -&gt; <span class="dv">2017-01</span>-20T15:<span class="dv">35</span>:<span class="fl">65.153654</span>Z</a></code></pre></div>
<p><a name="functions:format_urn"></a></p>
<h2 id="format_urnurn">format_urn(urn)</h2>
<p>format_urn turns <code>urn</code> into a human friendly string</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb68-1" data-line-number="1">@(format_urn(<span class="st">&quot;tel:+250781234567&quot;</span>)) -&gt; <span class="dv">0781</span> <span class="dv">234</span> <span class="dv">567</span></a>
<a class="sourceLine" id="cb68-2" data-line-number="2">@(format_urn(<span class="st">&quot;twitter:134252511151#billy_bob&quot;</span>)) -&gt; billy_bob</a>
<a class="sourceLine" id="cb68-3" data-line-number="3">@(format_urn(contact.urns)) -&gt; (<span class="dv">206</span>) <span class="dv">555-1212</span></a>
<a class="sourceLine" id="cb68-4" data-line-number="4">@(format_urn(contact.urns<span class="fl">.1</span>)) -&gt; foo@bar.com</a>
<a class="sourceLine" id="cb68-5" data-line-number="5">@(format_urn(contact.urns.mailto)) -&gt; foo@bar.com</a>
<a class="sourceLine" id="cb68-6" data-line-number="6">@(format_urn(contact.urns.mailto<span class="fl">.0</span>)) -&gt; foo@bar.com</a>
<a class="sourceLine" id="cb68-7" data-line-number="7">@(format_urn(contact.urns.telegram)) -&gt; <span class="st">&quot;&quot;</span></a>
<a class="sourceLine" id="cb68-8" data-line-number="8">@(format_urn(<span class="st">&quot;NOT URN&quot;</span>)) -&gt; ERROR</a></code></pre></div>
</div>
<h1 id="template-tests">Template Tests</h1>
<p>Template tests are a special class of functions which are used within the switch router. They are called in the same way as normal functions, but all return a test result object which by default evalutes to true or false, but can also be used to find the matching portion of the test by using the <code>match</code> component of the result. The flow editor builds these expressions using UI widgets, but they can be used anywhere a normal template function is used.</p>
<div class="excellent_tests">
<p><a name="functions:is_string_eq"></a></p>
<h2 id="is_string_eqrun">is_string_eq(run)</h2>
<p>is_string_eq returns whether two strings are equal (case sensitive). In the case that they are, it will return the string as the match.</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb69-1" data-line-number="1">@(is_string_eq(<span class="st">&quot;foo&quot;</span>, <span class="st">&quot;foo&quot;</span>)) -&gt; true</a>
<a class="sourceLine" id="cb69-2" data-line-number="2">@(is_string_eq(<span class="st">&quot;foo&quot;</span>, <span class="st">&quot;FOO&quot;</span>)) -&gt; false</a>
<a class="sourceLine" id="cb69-3" data-line-number="3">@(is_string_eq(<span class="st">&quot;foo&quot;</span>, <span class="st">&quot;bar&quot;</span>)) -&gt; false</a>
<a class="sourceLine" id="cb69-4" data-line-number="4">@(is_string_eq(<span class="st">&quot;foo&quot;</span>, <span class="st">&quot; foo &quot;</span>)) -&gt; false</a>
<a class="sourceLine" id="cb69-5" data-line-number="5">@(is_string_eq(run.status, <span class="st">&quot;completed&quot;</span>)) -&gt; true</a>
<a class="sourceLine" id="cb69-6" data-line-number="6">@(is_string_eq(child.status, <span class="st">&quot;expired&quot;</span>)) -&gt; false</a>
<a class="sourceLine" id="cb69-7" data-line-number="7">@(is_string_eq(webhook.status, <span class="st">&quot;success&quot;</span>)) -&gt; true</a>
<a class="sourceLine" id="cb69-8" data-line-number="8">@(is_string_eq(webhook.status, <span class="st">&quot;connection_error&quot;</span>)) -&gt; false</a></code></pre></div>
<p><a name="functions:has_error"></a></p>
<h2 id="has_errorvalue">has_error(value)</h2>
<p>has_error returns whether <code>value</code> is an error</p>
<p>Note that <code>contact.fields</code> and <code>run.results</code> are considered dynamic, so it is not an error to try to retrieve a value from fields or results which don‚Äôt exist, rather these return an empty value.</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb70-1" data-line-number="1">@(has_error(date(<span class="st">&quot;foo&quot;</span>))) -&gt; true</a>
<a class="sourceLine" id="cb70-2" data-line-number="2">@(has_error(run.not.existing)) -&gt; true</a>
<a class="sourceLine" id="cb70-3" data-line-number="3">@(has_error(contact.fields.unset)) -&gt; true</a>
<a class="sourceLine" id="cb70-4" data-line-number="4">@(has_error(<span class="st">&quot;hello&quot;</span>)) -&gt; false</a></code></pre></div>
<p><a name="functions:has_value"></a></p>
<h2 id="has_valuevalue">has_value(value)</h2>
<p>has_value returns whether <code>value</code> is non-nil and not an error</p>
<p>Note that <code>contact.fields</code> and <code>run.results</code> are considered dynamic, so it is not an error to try to retrieve a value from fields or results which don‚Äôt exist, rather these return an empty value.</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb71-1" data-line-number="1">@(has_value(date(<span class="st">&quot;foo&quot;</span>))) -&gt; false</a>
<a class="sourceLine" id="cb71-2" data-line-number="2">@(has_value(not.existing)) -&gt; false</a>
<a class="sourceLine" id="cb71-3" data-line-number="3">@(has_value(contact.fields.unset)) -&gt; false</a>
<a class="sourceLine" id="cb71-4" data-line-number="4">@(has_value(<span class="st">&quot;hello&quot;</span>)) -&gt; true</a></code></pre></div>
<p><a name="functions:has_wait_timed_out"></a></p>
<h2 id="has_wait_timed_outrun">has_wait_timed_out(run)</h2>
<p>has_wait_timed_out returns whether the last wait timed out.</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb72-1" data-line-number="1">@(has_wait_timed_out(run)) -&gt; false</a></code></pre></div>
<p><a name="functions:has_group"></a></p>
<h2 id="has_groupcontact">has_group(contact)</h2>
<p>has_group returns whether the <code>contact</code> is part of group with the passed in UUID</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb73-1" data-line-number="1">@(has_group(contact, <span class="st">&quot;97fe7029-3a15-4005-b0c7-277b884fc1d5&quot;</span>)) -&gt; true</a></code></pre></div>
<p><a name="functions:has_phrase"></a></p>
<h2 id="has_phrasestring-phrase">has_phrase(string, phrase)</h2>
<p>has_phrase tests whether <code>phrase</code> is contained in <code>string</code></p>
<p>The words in the test phrase must appear in the same order with no other words in between.</p>
<div class="sourceCode" id="cb74"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb74-1" data-line-number="1">@(has_phrase(<span class="st">&quot;the quick brown fox&quot;</span>, <span class="st">&quot;brown fox&quot;</span>)) -&gt; true</a>
<a class="sourceLine" id="cb74-2" data-line-number="2">@(has_phrase(<span class="st">&quot;the Quick Brown fox&quot;</span>, <span class="st">&quot;quick fox&quot;</span>)) -&gt; false</a>
<a class="sourceLine" id="cb74-3" data-line-number="3">@(has_phrase(<span class="st">&quot;the Quick Brown fox&quot;</span>, <span class="st">&quot;&quot;</span>)) -&gt; true</a>
<a class="sourceLine" id="cb74-4" data-line-number="4">@(has_phrase(<span class="st">&quot;the.quick.brown.fox&quot;</span>, <span class="st">&quot;the quick&quot;</span>).match) -&gt; <span class="st">&quot;the quick&quot;</span></a></code></pre></div>
<p><a name="functions:has_all_words"></a></p>
<h2 id="has_all_wordsstring-words">has_all_words(string, words)</h2>
<p>has_all_words tests whether all the <code>words</code> are contained in <code>string</code></p>
<p>The words can be in any order and may appear more than once.</p>
<div class="sourceCode" id="cb75"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb75-1" data-line-number="1">@(has_all_words(<span class="st">&quot;the quick brown FOX&quot;</span>, <span class="st">&quot;the fox&quot;</span>)) -&gt; true</a>
<a class="sourceLine" id="cb75-2" data-line-number="2">@(has_all_words(<span class="st">&quot;the quick brown FOX&quot;</span>, <span class="st">&quot;the fox&quot;</span>).match) -&gt; <span class="st">&quot;the FOX&quot;</span></a>
<a class="sourceLine" id="cb75-3" data-line-number="3">@(has_all_words(<span class="st">&quot;the quick brown fox&quot;</span>, <span class="st">&quot;red fox&quot;</span>)) -&gt; false</a></code></pre></div>
<p><a name="functions:has_any_word"></a></p>
<h2 id="has_any_wordstring-words">has_any_word(string, words)</h2>
<p>has_any_word tests whether any of the <code>words</code> are contained in the <code>string</code></p>
<p>Only one of the words needs to match and it may appear more than once.</p>
<div class="sourceCode" id="cb76"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb76-1" data-line-number="1">@(has_any_word(<span class="st">&quot;The Quick Brown Fox&quot;</span>, <span class="st">&quot;fox quick&quot;</span>)) -&gt; true</a>
<a class="sourceLine" id="cb76-2" data-line-number="2">@(has_any_word(<span class="st">&quot;The Quick Brown Fox&quot;</span>, <span class="st">&quot;red fox&quot;</span>)) -&gt; true</a>
<a class="sourceLine" id="cb76-3" data-line-number="3">@(has_any_word(<span class="st">&quot;The Quick Brown Fox&quot;</span>, <span class="st">&quot;red fox&quot;</span>).match) -&gt; <span class="st">&quot;Fox&quot;</span></a></code></pre></div>
<p><a name="functions:has_only_phrase"></a></p>
<h2 id="has_only_phrasestring-phrase">has_only_phrase(string, phrase)</h2>
<p>has_only_phrase tests whether the <code>string</code> contains only <code>phrase</code></p>
<p>The phrase must be the only text in the string to match</p>
<div class="sourceCode" id="cb77"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb77-1" data-line-number="1">@(has_only_phrase(<span class="st">&quot;The Quick Brown Fox&quot;</span>, <span class="st">&quot;quick brown&quot;</span>)) -&gt; false</a>
<a class="sourceLine" id="cb77-2" data-line-number="2">@(has_only_phrase(<span class="st">&quot;Quick Brown&quot;</span>, <span class="st">&quot;quick brown&quot;</span>)) -&gt; true</a>
<a class="sourceLine" id="cb77-3" data-line-number="3">@(has_only_phrase(<span class="st">&quot;the Quick Brown fox&quot;</span>, <span class="st">&quot;&quot;</span>)) -&gt; false</a>
<a class="sourceLine" id="cb77-4" data-line-number="4">@(has_only_phrase(<span class="st">&quot;&quot;</span>, <span class="st">&quot;&quot;</span>)) -&gt; true</a>
<a class="sourceLine" id="cb77-5" data-line-number="5">@(has_only_phrase(<span class="st">&quot;Quick Brown&quot;</span>, <span class="st">&quot;quick brown&quot;</span>).match) -&gt; <span class="st">&quot;Quick Brown&quot;</span></a>
<a class="sourceLine" id="cb77-6" data-line-number="6">@(has_only_phrase(<span class="st">&quot;The Quick Brown Fox&quot;</span>, <span class="st">&quot;red fox&quot;</span>)) -&gt; false</a></code></pre></div>
<p><a name="functions:has_text"></a></p>
<h2 id="has_textstring">has_text(string)</h2>
<p>has_text tests whether there the string has any characters in it</p>
<div class="sourceCode" id="cb78"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb78-1" data-line-number="1">@(has_text(<span class="st">&quot;quick brown&quot;</span>)) -&gt; true</a>
<a class="sourceLine" id="cb78-2" data-line-number="2">@(has_text(<span class="st">&quot;quick brown&quot;</span>).match) -&gt; <span class="st">&quot;quick brown&quot;</span></a>
<a class="sourceLine" id="cb78-3" data-line-number="3">@(has_text(<span class="st">&quot;&quot;</span>)) -&gt; false</a>
<a class="sourceLine" id="cb78-4" data-line-number="4">@(has_text(<span class="st">&quot; </span><span class="sc">\n</span><span class="st">&quot;</span>)) -&gt; false</a>
<a class="sourceLine" id="cb78-5" data-line-number="5">@(has_text(<span class="dv">123</span>)) -&gt; true</a></code></pre></div>
<p><a name="functions:has_beginning"></a></p>
<h2 id="has_beginningstring-beginning">has_beginning(string, beginning)</h2>
<p>has_beginning tests whether <code>string</code> starts with <code>beginning</code></p>
<p>Both strings are trimmed of surrounding whitespace, but otherwise matching is strict without any tokenization.</p>
<div class="sourceCode" id="cb79"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb79-1" data-line-number="1">@(has_beginning(<span class="st">&quot;The Quick Brown&quot;</span>, <span class="st">&quot;the quick&quot;</span>)) -&gt; true</a>
<a class="sourceLine" id="cb79-2" data-line-number="2">@(has_beginning(<span class="st">&quot;The Quick Brown&quot;</span>, <span class="st">&quot;the quick&quot;</span>).match) -&gt; <span class="st">&quot;The Quick&quot;</span></a>
<a class="sourceLine" id="cb79-3" data-line-number="3">@(has_beginning(<span class="st">&quot;The Quick Brown&quot;</span>, <span class="st">&quot;the   quick&quot;</span>)) -&gt; false</a>
<a class="sourceLine" id="cb79-4" data-line-number="4">@(has_beginning(<span class="st">&quot;The Quick Brown&quot;</span>, <span class="st">&quot;quick brown&quot;</span>)) -&gt; false</a></code></pre></div>
<p><a name="functions:has_pattern"></a></p>
<h2 id="has_patternstring-pattern">has_pattern(string, pattern)</h2>
<p>has_pattern tests whether <code>string</code> matches the regex <code>pattern</code></p>
<p>Both strings are trimmed of surrounding whitespace and matching is case-insensitive.</p>
<div class="sourceCode" id="cb80"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb80-1" data-line-number="1">@(has_pattern(<span class="st">&quot;Sell cheese please&quot;</span>, <span class="st">&quot;buy (\w+)&quot;</span>)) -&gt; false</a>
<a class="sourceLine" id="cb80-2" data-line-number="2">@(has_pattern(<span class="st">&quot;Buy cheese please&quot;</span>, <span class="st">&quot;buy (\w+)&quot;</span>)) -&gt; true</a>
<a class="sourceLine" id="cb80-3" data-line-number="3">@(has_pattern(<span class="st">&quot;Buy cheese please&quot;</span>, <span class="st">&quot;buy (\w+)&quot;</span>).match) -&gt; <span class="st">&quot;Buy cheese&quot;</span></a>
<a class="sourceLine" id="cb80-4" data-line-number="4">@(has_pattern(<span class="st">&quot;Buy cheese please&quot;</span>, <span class="st">&quot;buy (\w+)&quot;</span>).match.groups[<span class="dv">0</span>]) -&gt; <span class="st">&quot;Buy cheese&quot;</span></a>
<a class="sourceLine" id="cb80-5" data-line-number="5">@(has_pattern(<span class="st">&quot;Buy cheese please&quot;</span>, <span class="st">&quot;buy (\w+)&quot;</span>).match.groups[<span class="dv">1</span>]) -&gt; <span class="st">&quot;cheese&quot;</span></a></code></pre></div>
<p><a name="functions:has_number"></a></p>
<h2 id="has_numberstring">has_number(string)</h2>
<p>has_number tests whether <code>string</code> contains a number</p>
<div class="sourceCode" id="cb81"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb81-1" data-line-number="1">@(has_number(<span class="st">&quot;the number is 42&quot;</span>)) -&gt; true</a>
<a class="sourceLine" id="cb81-2" data-line-number="2">@(has_number(<span class="st">&quot;the number is 42&quot;</span>).match) -&gt; <span class="dv">42</span></a>
<a class="sourceLine" id="cb81-3" data-line-number="3">@(has_number(<span class="st">&quot;the number is forty two&quot;</span>)) -&gt; false</a></code></pre></div>
<p><a name="functions:has_number_between"></a></p>
<h2 id="has_number_betweenstring-min-max">has_number_between(string, min, max)</h2>
<p>has_number_between tests whether <code>string</code> contains a number between <code>min</code> and <code>max</code> inclusive</p>
<div class="sourceCode" id="cb82"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb82-1" data-line-number="1">@(has_number_between(<span class="st">&quot;the number is 42&quot;</span>, <span class="dv">40</span>, <span class="dv">44</span>)) -&gt; true</a>
<a class="sourceLine" id="cb82-2" data-line-number="2">@(has_number_between(<span class="st">&quot;the number is 42&quot;</span>, <span class="dv">40</span>, <span class="dv">44</span>).match) -&gt; <span class="dv">42</span></a>
<a class="sourceLine" id="cb82-3" data-line-number="3">@(has_number_between(<span class="st">&quot;the number is 42&quot;</span>, <span class="dv">50</span>, <span class="dv">60</span>)) -&gt; false</a>
<a class="sourceLine" id="cb82-4" data-line-number="4">@(has_number_between(<span class="st">&quot;the number is not there&quot;</span>, <span class="dv">50</span>, <span class="dv">60</span>)) -&gt; false</a>
<a class="sourceLine" id="cb82-5" data-line-number="5">@(has_number_between(<span class="st">&quot;the number is not there&quot;</span>, <span class="st">&quot;foo&quot;</span>, <span class="dv">60</span>)) -&gt; ERROR</a></code></pre></div>
<p><a name="functions:has_number_lt"></a></p>
<h2 id="has_number_ltstring-max">has_number_lt(string, max)</h2>
<p>has_number_lt tests whether <code>string</code> contains a number less than <code>max</code></p>
<div class="sourceCode" id="cb83"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb83-1" data-line-number="1">@(has_number_lt(<span class="st">&quot;the number is 42&quot;</span>, <span class="dv">44</span>)) -&gt; true</a>
<a class="sourceLine" id="cb83-2" data-line-number="2">@(has_number_lt(<span class="st">&quot;the number is 42&quot;</span>, <span class="dv">44</span>).match) -&gt; <span class="dv">42</span></a>
<a class="sourceLine" id="cb83-3" data-line-number="3">@(has_number_lt(<span class="st">&quot;the number is 42&quot;</span>, <span class="dv">40</span>)) -&gt; false</a>
<a class="sourceLine" id="cb83-4" data-line-number="4">@(has_number_lt(<span class="st">&quot;the number is not there&quot;</span>, <span class="dv">40</span>)) -&gt; false</a>
<a class="sourceLine" id="cb83-5" data-line-number="5">@(has_number_lt(<span class="st">&quot;the number is not there&quot;</span>, <span class="st">&quot;foo&quot;</span>)) -&gt; ERROR</a></code></pre></div>
<p><a name="functions:has_number_lte"></a></p>
<h2 id="has_number_ltestring-max">has_number_lte(string, max)</h2>
<p>has_number_lte tests whether <code>value</code> contains a number less than or equal to <code>max</code></p>
<div class="sourceCode" id="cb84"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb84-1" data-line-number="1">@(has_number_lte(<span class="st">&quot;the number is 42&quot;</span>, <span class="dv">42</span>)) -&gt; true</a>
<a class="sourceLine" id="cb84-2" data-line-number="2">@(has_number_lte(<span class="st">&quot;the number is 42&quot;</span>, <span class="dv">44</span>).match) -&gt; <span class="dv">42</span></a>
<a class="sourceLine" id="cb84-3" data-line-number="3">@(has_number_lte(<span class="st">&quot;the number is 42&quot;</span>, <span class="dv">40</span>)) -&gt; false</a>
<a class="sourceLine" id="cb84-4" data-line-number="4">@(has_number_lte(<span class="st">&quot;the number is not there&quot;</span>, <span class="dv">40</span>)) -&gt; false</a>
<a class="sourceLine" id="cb84-5" data-line-number="5">@(has_number_lte(<span class="st">&quot;the number is not there&quot;</span>, <span class="st">&quot;foo&quot;</span>)) -&gt; ERROR</a></code></pre></div>
<p><a name="functions:has_number_eq"></a></p>
<h2 id="has_number_eqstring-value">has_number_eq(string, value)</h2>
<p>has_number_eq tests whether <code>strung</code> contains a number equal to the <code>value</code></p>
<div class="sourceCode" id="cb85"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb85-1" data-line-number="1">@(has_number_eq(<span class="st">&quot;the number is 42&quot;</span>, <span class="dv">42</span>)) -&gt; true</a>
<a class="sourceLine" id="cb85-2" data-line-number="2">@(has_number_eq(<span class="st">&quot;the number is 42&quot;</span>, <span class="dv">42</span>).match) -&gt; <span class="dv">42</span></a>
<a class="sourceLine" id="cb85-3" data-line-number="3">@(has_number_eq(<span class="st">&quot;the number is 42&quot;</span>, <span class="dv">40</span>)) -&gt; false</a>
<a class="sourceLine" id="cb85-4" data-line-number="4">@(has_number_eq(<span class="st">&quot;the number is not there&quot;</span>, <span class="dv">40</span>)) -&gt; false</a>
<a class="sourceLine" id="cb85-5" data-line-number="5">@(has_number_eq(<span class="st">&quot;the number is not there&quot;</span>, <span class="st">&quot;foo&quot;</span>)) -&gt; ERROR</a></code></pre></div>
<p><a name="functions:has_number_gte"></a></p>
<h2 id="has_number_gtestring-min">has_number_gte(string, min)</h2>
<p>has_number_gte tests whether <code>string</code> contains a number greater than or equal to <code>min</code></p>
<div class="sourceCode" id="cb86"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb86-1" data-line-number="1">@(has_number_gte(<span class="st">&quot;the number is 42&quot;</span>, <span class="dv">42</span>)) -&gt; true</a>
<a class="sourceLine" id="cb86-2" data-line-number="2">@(has_number_gte(<span class="st">&quot;the number is 42&quot;</span>, <span class="dv">42</span>).match) -&gt; <span class="dv">42</span></a>
<a class="sourceLine" id="cb86-3" data-line-number="3">@(has_number_gte(<span class="st">&quot;the number is 42&quot;</span>, <span class="dv">45</span>)) -&gt; false</a>
<a class="sourceLine" id="cb86-4" data-line-number="4">@(has_number_gte(<span class="st">&quot;the number is not there&quot;</span>, <span class="dv">40</span>)) -&gt; false</a>
<a class="sourceLine" id="cb86-5" data-line-number="5">@(has_number_gte(<span class="st">&quot;the number is not there&quot;</span>, <span class="st">&quot;foo&quot;</span>)) -&gt; ERROR</a></code></pre></div>
<p><a name="functions:has_number_gt"></a></p>
<h2 id="has_number_gtstring-min">has_number_gt(string, min)</h2>
<p>has_number_gt tests whether <code>string</code> contains a number greater than <code>min</code></p>
<div class="sourceCode" id="cb87"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb87-1" data-line-number="1">@(has_number_gt(<span class="st">&quot;the number is 42&quot;</span>, <span class="dv">40</span>)) -&gt; true</a>
<a class="sourceLine" id="cb87-2" data-line-number="2">@(has_number_gt(<span class="st">&quot;the number is 42&quot;</span>, <span class="dv">40</span>).match) -&gt; <span class="dv">42</span></a>
<a class="sourceLine" id="cb87-3" data-line-number="3">@(has_number_gt(<span class="st">&quot;the number is 42&quot;</span>, <span class="dv">42</span>)) -&gt; false</a>
<a class="sourceLine" id="cb87-4" data-line-number="4">@(has_number_gt(<span class="st">&quot;the number is not there&quot;</span>, <span class="dv">40</span>)) -&gt; false</a>
<a class="sourceLine" id="cb87-5" data-line-number="5">@(has_number_gt(<span class="st">&quot;the number is not there&quot;</span>, <span class="st">&quot;foo&quot;</span>)) -&gt; ERROR</a></code></pre></div>
<p><a name="functions:has_date"></a></p>
<h2 id="has_datestring">has_date(string)</h2>
<p>has_date tests whether <code>string</code> contains a date formatted according to our environment</p>
<div class="sourceCode" id="cb88"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb88-1" data-line-number="1">@(has_date(<span class="st">&quot;the date is 2017-01-15&quot;</span>)) -&gt; true</a>
<a class="sourceLine" id="cb88-2" data-line-number="2">@(has_date(<span class="st">&quot;the date is 2017-01-15&quot;</span>).match) -&gt; <span class="dv">2017-01</span>-15T00:<span class="dv">00</span>:<span class="fl">00.000000</span>Z</a>
<a class="sourceLine" id="cb88-3" data-line-number="3">@(has_date(<span class="st">&quot;there is no date here, just a year 2017&quot;</span>)) -&gt; false</a></code></pre></div>
<p><a name="functions:has_date_lt"></a></p>
<h2 id="has_date_ltstring-max">has_date_lt(string, max)</h2>
<p>has_date_lt tests whether <code>value</code> contains a date before the date <code>max</code></p>
<div class="sourceCode" id="cb89"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb89-1" data-line-number="1">@(has_date_lt(<span class="st">&quot;the date is 2017-01-15&quot;</span>, <span class="st">&quot;2017-06-01&quot;</span>)) -&gt; true</a>
<a class="sourceLine" id="cb89-2" data-line-number="2">@(has_date_lt(<span class="st">&quot;the date is 2017-01-15&quot;</span>, <span class="st">&quot;2017-06-01&quot;</span>).match) -&gt; <span class="dv">2017-01</span>-15T00:<span class="dv">00</span>:<span class="fl">00.000000</span>Z</a>
<a class="sourceLine" id="cb89-3" data-line-number="3">@(has_date_lt(<span class="st">&quot;there is no date here, just a year 2017&quot;</span>, <span class="st">&quot;2017-06-01&quot;</span>)) -&gt; false</a>
<a class="sourceLine" id="cb89-4" data-line-number="4">@(has_date_lt(<span class="st">&quot;there is no date here, just a year 2017&quot;</span>, <span class="st">&quot;not date&quot;</span>)) -&gt; ERROR</a></code></pre></div>
<p><a name="functions:has_date_eq"></a></p>
<h2 id="has_date_eqstring-date">has_date_eq(string, date)</h2>
<p>has_date_eq tests whether <code>string</code> a date equal to <code>date</code></p>
<div class="sourceCode" id="cb90"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb90-1" data-line-number="1">@(has_date_eq(<span class="st">&quot;the date is 2017-01-15&quot;</span>, <span class="st">&quot;2017-01-15&quot;</span>)) -&gt; true</a>
<a class="sourceLine" id="cb90-2" data-line-number="2">@(has_date_eq(<span class="st">&quot;the date is 2017-01-15&quot;</span>, <span class="st">&quot;2017-01-15&quot;</span>).match) -&gt; <span class="dv">2017-01</span>-15T00:<span class="dv">00</span>:<span class="fl">00.000000</span>Z</a>
<a class="sourceLine" id="cb90-3" data-line-number="3">@(has_date_eq(<span class="st">&quot;the date is 2017-01-15 15:00&quot;</span>, <span class="st">&quot;2017-01-15&quot;</span>)) -&gt; false</a>
<a class="sourceLine" id="cb90-4" data-line-number="4">@(has_date_eq(<span class="st">&quot;there is no date here, just a year 2017&quot;</span>, <span class="st">&quot;2017-06-01&quot;</span>)) -&gt; false</a>
<a class="sourceLine" id="cb90-5" data-line-number="5">@(has_date_eq(<span class="st">&quot;there is no date here, just a year 2017&quot;</span>, <span class="st">&quot;not date&quot;</span>)) -&gt; ERROR</a></code></pre></div>
<p><a name="functions:has_date_gt"></a></p>
<h2 id="has_date_gtstring-min">has_date_gt(string, min)</h2>
<p>has_date_gt tests whether <code>string</code> a date after the date <code>min</code></p>
<div class="sourceCode" id="cb91"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb91-1" data-line-number="1">@(has_date_gt(<span class="st">&quot;the date is 2017-01-15&quot;</span>, <span class="st">&quot;2017-01-01&quot;</span>)) -&gt; true</a>
<a class="sourceLine" id="cb91-2" data-line-number="2">@(has_date_gt(<span class="st">&quot;the date is 2017-01-15&quot;</span>, <span class="st">&quot;2017-01-01&quot;</span>).match) -&gt; <span class="dv">2017-01</span>-15T00:<span class="dv">00</span>:<span class="fl">00.000000</span>Z</a>
<a class="sourceLine" id="cb91-3" data-line-number="3">@(has_date_gt(<span class="st">&quot;the date is 2017-01-15&quot;</span>, <span class="st">&quot;2017-03-15&quot;</span>)) -&gt; false</a>
<a class="sourceLine" id="cb91-4" data-line-number="4">@(has_date_gt(<span class="st">&quot;there is no date here, just a year 2017&quot;</span>, <span class="st">&quot;2017-06-01&quot;</span>)) -&gt; false</a>
<a class="sourceLine" id="cb91-5" data-line-number="5">@(has_date_gt(<span class="st">&quot;there is no date here, just a year 2017&quot;</span>, <span class="st">&quot;not date&quot;</span>)) -&gt; ERROR</a></code></pre></div>
<p><a name="functions:has_email"></a></p>
<h2 id="has_emailstring">has_email(string)</h2>
<p>has_email tests whether an email is contained in <code>string</code></p>
<div class="sourceCode" id="cb92"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb92-1" data-line-number="1">@(has_email(<span class="st">&quot;my email is foo1@bar.com, please respond&quot;</span>)) -&gt; true</a>
<a class="sourceLine" id="cb92-2" data-line-number="2">@(has_email(<span class="st">&quot;my email is foo1@bar.com, please respond&quot;</span>).match) -&gt; <span class="st">&quot;foo1@bar.com&quot;</span></a>
<a class="sourceLine" id="cb92-3" data-line-number="3">@(has_email(<span class="st">&quot;my email is &lt;foo@bar2.com&gt;&quot;</span>)) -&gt; true</a>
<a class="sourceLine" id="cb92-4" data-line-number="4">@(has_email(<span class="st">&quot;i&#39;m not sharing my email&quot;</span>)) -&gt; false</a></code></pre></div>
<p><a name="functions:has_phone"></a></p>
<h2 id="has_phonestring-country_code">has_phone(string, country_code)</h2>
<p>has_phone tests whether a phone number (in the passed in <code>country_code</code>) is contained in the <code>string</code></p>
<div class="sourceCode" id="cb93"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb93-1" data-line-number="1">@(has_phone(<span class="st">&quot;my number is 2067799294&quot;</span>, <span class="st">&quot;US&quot;</span>)) -&gt; true</a>
<a class="sourceLine" id="cb93-2" data-line-number="2">@(has_phone(<span class="st">&quot;my number is 206 779 9294&quot;</span>, <span class="st">&quot;US&quot;</span>).match) -&gt; <span class="st">&quot;+12067799294&quot;</span></a>
<a class="sourceLine" id="cb93-3" data-line-number="3">@(has_phone(<span class="st">&quot;my number is none of your business&quot;</span>, <span class="st">&quot;US&quot;</span>)) -&gt; false</a></code></pre></div>
<p><a name="functions:has_state"></a></p>
<h2 id="has_statestring">has_state(string)</h2>
<p>has_state tests whether a state name is contained in the <code>string</code></p>
<div class="sourceCode" id="cb94"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb94-1" data-line-number="1">@(has_state(<span class="st">&quot;Kigali&quot;</span>)) -&gt; true</a>
<a class="sourceLine" id="cb94-2" data-line-number="2">@(has_state(<span class="st">&quot;Boston&quot;</span>)) -&gt; false</a>
<a class="sourceLine" id="cb94-3" data-line-number="3">@(has_state(<span class="st">&quot;¬°Kigali!&quot;</span>)) -&gt; true</a>
<a class="sourceLine" id="cb94-4" data-line-number="4">@(has_state(<span class="st">&quot;I live in Kigali&quot;</span>)) -&gt; true</a></code></pre></div>
<p><a name="functions:has_district"></a></p>
<h2 id="has_districtstring-state">has_district(string, state)</h2>
<p>has_district tests whether a district name is contained in the <code>string</code>. If <code>state</code> is also provided then the returned district must be within that state.</p>
<div class="sourceCode" id="cb95"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb95-1" data-line-number="1">@(has_district(<span class="st">&quot;Gasabo&quot;</span>, <span class="st">&quot;Kigali&quot;</span>)) -&gt; true</a>
<a class="sourceLine" id="cb95-2" data-line-number="2">@(has_district(<span class="st">&quot;I live in Gasabo&quot;</span>, <span class="st">&quot;Kigali&quot;</span>)) -&gt; true</a>
<a class="sourceLine" id="cb95-3" data-line-number="3">@(has_district(<span class="st">&quot;Gasabo&quot;</span>, <span class="st">&quot;Boston&quot;</span>)) -&gt; false</a>
<a class="sourceLine" id="cb95-4" data-line-number="4">@(has_district(<span class="st">&quot;Gasabo&quot;</span>)) -&gt; true</a></code></pre></div>
<p><a name="functions:has_ward"></a></p>
<h2 id="has_wardstring-district-state">has_ward(string, district, state)</h2>
<p>has_ward tests whether a ward name is contained in the <code>string</code></p>
<div class="sourceCode" id="cb96"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb96-1" data-line-number="1">@(has_ward(<span class="st">&quot;Gisozi&quot;</span>, <span class="st">&quot;Gasabo&quot;</span>, <span class="st">&quot;Kigali&quot;</span>)) -&gt; true</a>
<a class="sourceLine" id="cb96-2" data-line-number="2">@(has_ward(<span class="st">&quot;I live in Gisozi&quot;</span>, <span class="st">&quot;Gasabo&quot;</span>, <span class="st">&quot;Kigali&quot;</span>)) -&gt; true</a>
<a class="sourceLine" id="cb96-3" data-line-number="3">@(has_ward(<span class="st">&quot;Gisozi&quot;</span>, <span class="st">&quot;Gasabo&quot;</span>, <span class="st">&quot;Brooklyn&quot;</span>)) -&gt; false</a>
<a class="sourceLine" id="cb96-4" data-line-number="4">@(has_ward(<span class="st">&quot;Gisozi&quot;</span>, <span class="st">&quot;Brooklyn&quot;</span>, <span class="st">&quot;Kigali&quot;</span>)) -&gt; false</a>
<a class="sourceLine" id="cb96-5" data-line-number="5">@(has_ward(<span class="st">&quot;Brooklyn&quot;</span>, <span class="st">&quot;Gasabo&quot;</span>, <span class="st">&quot;Kigali&quot;</span>)) -&gt; false</a>
<a class="sourceLine" id="cb96-6" data-line-number="6">@(has_ward(<span class="st">&quot;Gasabo&quot;</span>)) -&gt; false</a>
<a class="sourceLine" id="cb96-7" data-line-number="7">@(has_ward(<span class="st">&quot;Gisozi&quot;</span>)) -&gt; true</a></code></pre></div>
</div>
<h1 id="action-definitions">Action Definitions</h1>
<p>Actions on a node generate events which can then be ingested by the engine container. In some cases the actions cause an immediate action, such as calling a webhook, in others the engine container is responsible for taking the action based on the event that is output, such as sending messages or updating contact fields. In either case the internal state of the engine is always updated to represent the new state so that flow execution is consistent. For example, while the engine itself does not have access to a contact store, it updates its internal representation of a contact‚Äôs state based on action performed on a flow so that later references in the flow are correct.</p>
<div class="actions">
<p><a name="actions:add_contact_groups"></a></p>
<h2 id="add_contact_groups">add_contact_groups</h2>
<p>add_contact_groups can be used to add a contact to one or more groups. An <code>contact_groups_added</code> event will be created for the groups which the contact has been added to.</p>
<div class="input_action">
<h3>
Action
</h3>
<div class="sourceCode" id="cb97"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb97-1" data-line-number="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb97-2" data-line-number="2">  <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;add_contact_groups&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb97-3" data-line-number="3">  <span class="dt">&quot;uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;8eebd020-1af5-431c-b943-aa670fc74da9&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb97-4" data-line-number="4">  <span class="dt">&quot;groups&quot;</span><span class="fu">:</span> <span class="ot">[</span></a>
<a class="sourceLine" id="cb97-5" data-line-number="5">    <span class="fu">{</span></a>
<a class="sourceLine" id="cb97-6" data-line-number="6">      <span class="dt">&quot;uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;1e1ce1e1-9288-4504-869e-022d1003c72a&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb97-7" data-line-number="7">      <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;Customers&quot;</span></a>
<a class="sourceLine" id="cb97-8" data-line-number="8">    <span class="fu">}</span></a>
<a class="sourceLine" id="cb97-9" data-line-number="9">  <span class="ot">]</span></a>
<a class="sourceLine" id="cb97-10" data-line-number="10"><span class="fu">}</span></a></code></pre></div>
</div>
<div class="output_event">
<h3>
Event
</h3>
<div class="sourceCode" id="cb98"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb98-1" data-line-number="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb98-2" data-line-number="2">    <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;contact_groups_added&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb98-3" data-line-number="3">    <span class="dt">&quot;created_on&quot;</span><span class="fu">:</span> <span class="st">&quot;2018-04-02T16:39:02.762257443Z&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb98-4" data-line-number="4">    <span class="dt">&quot;step_uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;ab7b582e-9340-46bc-95c5-296ad64f31a4&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb98-5" data-line-number="5">    <span class="dt">&quot;groups&quot;</span><span class="fu">:</span> <span class="ot">[</span></a>
<a class="sourceLine" id="cb98-6" data-line-number="6">        <span class="fu">{</span></a>
<a class="sourceLine" id="cb98-7" data-line-number="7">            <span class="dt">&quot;uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;1e1ce1e1-9288-4504-869e-022d1003c72a&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb98-8" data-line-number="8">            <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;Customers&quot;</span></a>
<a class="sourceLine" id="cb98-9" data-line-number="9">        <span class="fu">}</span></a>
<a class="sourceLine" id="cb98-10" data-line-number="10">    <span class="ot">]</span></a>
<a class="sourceLine" id="cb98-11" data-line-number="11"><span class="fu">}</span></a></code></pre></div>
</div>
<p><a name="actions:add_contact_urn"></a></p>
<h2 id="add_contact_urn">add_contact_urn</h2>
<p>add_contact_urn can be used to add a URN to the current contact. An <code>contact_urn_added</code> event will be created when this action is encountered. If there is no contact then this action will be ignored.</p>
<div class="input_action">
<h3>
Action
</h3>
<div class="sourceCode" id="cb99"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb99-1" data-line-number="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb99-2" data-line-number="2">  <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;add_contact_urn&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb99-3" data-line-number="3">  <span class="dt">&quot;uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;8eebd020-1af5-431c-b943-aa670fc74da9&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb99-4" data-line-number="4">  <span class="dt">&quot;scheme&quot;</span><span class="fu">:</span> <span class="st">&quot;tel&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb99-5" data-line-number="5">  <span class="dt">&quot;path&quot;</span><span class="fu">:</span> <span class="st">&quot;@flow.phone_number&quot;</span></a>
<a class="sourceLine" id="cb99-6" data-line-number="6"><span class="fu">}</span></a></code></pre></div>
</div>
<div class="output_event">
<h3>
Event
</h3>
<div class="sourceCode" id="cb100"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb100-1" data-line-number="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb100-2" data-line-number="2">    <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;error&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb100-3" data-line-number="3">    <span class="dt">&quot;created_on&quot;</span><span class="fu">:</span> <span class="st">&quot;2018-04-02T16:39:02.762677183Z&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb100-4" data-line-number="4">    <span class="dt">&quot;step_uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;0bcdcc7d-06ed-4a8a-80c5-5454ae7f0736&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb100-5" data-line-number="5">    <span class="dt">&quot;text&quot;</span><span class="fu">:</span> <span class="st">&quot;unable to add URN &#39;tel:@flow.phone_number&#39;: The phone number supplied was empty.&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb100-6" data-line-number="6">    <span class="dt">&quot;fatal&quot;</span><span class="fu">:</span> <span class="kw">false</span></a>
<a class="sourceLine" id="cb100-7" data-line-number="7"><span class="fu">}</span></a></code></pre></div>
</div>
<p><a name="actions:add_input_labels"></a></p>
<h2 id="add_input_labels">add_input_labels</h2>
<p>add_input_labels can be used to add labels to the last user input on a flow. An <code>input_labels_added</code> event will be created with the labels added when this action is encountered. If there is no user input at that point then this action will be ignored.</p>
<div class="input_action">
<h3>
Action
</h3>
<div class="sourceCode" id="cb101"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb101-1" data-line-number="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb101-2" data-line-number="2">  <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;add_input_labels&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb101-3" data-line-number="3">  <span class="dt">&quot;uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;8eebd020-1af5-431c-b943-aa670fc74da9&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb101-4" data-line-number="4">  <span class="dt">&quot;labels&quot;</span><span class="fu">:</span> <span class="ot">[</span></a>
<a class="sourceLine" id="cb101-5" data-line-number="5">    <span class="fu">{</span></a>
<a class="sourceLine" id="cb101-6" data-line-number="6">      <span class="dt">&quot;uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;3f65d88a-95dc-4140-9451-943e94e06fea&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb101-7" data-line-number="7">      <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;Spam&quot;</span></a>
<a class="sourceLine" id="cb101-8" data-line-number="8">    <span class="fu">}</span></a>
<a class="sourceLine" id="cb101-9" data-line-number="9">  <span class="ot">]</span></a>
<a class="sourceLine" id="cb101-10" data-line-number="10"><span class="fu">}</span></a></code></pre></div>
</div>
<div class="output_event">
<h3>
Event
</h3>
<div class="sourceCode" id="cb102"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb102-1" data-line-number="1"><span class="ot">[]</span></a></code></pre></div>
</div>
<p><a name="actions:call_webhook"></a></p>
<h2 id="call_webhook">call_webhook</h2>
<p>call_webhook can be used to call an external service and insert the results in <span class="citation" data-cites="run.webhook">@run.webhook</span> context variable. The body, header and url fields may be templates and will be evaluated at runtime.</p>
<p>A <code>webhook_called</code> event will be created based on the results of the HTTP call.</p>
<div class="input_action">
<h3>
Action
</h3>
<div class="sourceCode" id="cb103"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb103-1" data-line-number="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb103-2" data-line-number="2">  <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;call_webhook&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb103-3" data-line-number="3">  <span class="dt">&quot;uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;8eebd020-1af5-431c-b943-aa670fc74da9&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb103-4" data-line-number="4">  <span class="dt">&quot;method&quot;</span><span class="fu">:</span> <span class="st">&quot;GET&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb103-5" data-line-number="5">  <span class="dt">&quot;url&quot;</span><span class="fu">:</span> <span class="st">&quot;https://api.ipify.org?format=json&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb103-6" data-line-number="6">  <span class="dt">&quot;headers&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb103-7" data-line-number="7">    <span class="dt">&quot;Authorization&quot;</span><span class="fu">:</span> <span class="st">&quot;Token AAFFZZHH&quot;</span></a>
<a class="sourceLine" id="cb103-8" data-line-number="8">  <span class="fu">}</span></a>
<a class="sourceLine" id="cb103-9" data-line-number="9"><span class="fu">}</span></a></code></pre></div>
</div>
<div class="output_event">
<h3>
Event
</h3>
<div class="sourceCode" id="cb104"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb104-1" data-line-number="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb104-2" data-line-number="2">    <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;webhook_called&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb104-3" data-line-number="3">    <span class="dt">&quot;created_on&quot;</span><span class="fu">:</span> <span class="st">&quot;2018-04-02T16:39:03.489514413Z&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb104-4" data-line-number="4">    <span class="dt">&quot;step_uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;20603fb5-2a60-4311-a0bb-5d3ddfb40152&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb104-5" data-line-number="5">    <span class="dt">&quot;url&quot;</span><span class="fu">:</span> <span class="st">&quot;https://api.ipify.org?format=json&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb104-6" data-line-number="6">    <span class="dt">&quot;status&quot;</span><span class="fu">:</span> <span class="st">&quot;success&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb104-7" data-line-number="7">    <span class="dt">&quot;status_code&quot;</span><span class="fu">:</span> <span class="dv">200</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb104-8" data-line-number="8">    <span class="dt">&quot;request&quot;</span><span class="fu">:</span> <span class="st">&quot;GET /?format=json HTTP/1.1</span><span class="ch">\r\n</span><span class="st">Host: api.ipify.org</span><span class="ch">\r\n</span><span class="st">User-Agent: Go-http-client/1.1</span><span class="ch">\r\n</span><span class="st">Authorization: Token AAFFZZHH</span><span class="ch">\r\n</span><span class="st">Accept-Encoding: gzip</span><span class="ch">\r\n\r\n</span><span class="st">&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb104-9" data-line-number="9">    <span class="dt">&quot;response&quot;</span><span class="fu">:</span> <span class="st">&quot;HTTP/1.1 200 OK</span><span class="ch">\r\n</span><span class="st">Content-Length: 23</span><span class="ch">\r\n</span><span class="st">Connection: keep-alive</span><span class="ch">\r\n</span><span class="st">Content-Type: application/json</span><span class="ch">\r\n</span><span class="st">Date: Mon, 02 Apr 2018 16:39:03 GMT</span><span class="ch">\r\n</span><span class="st">Server: Cowboy</span><span class="ch">\r\n</span><span class="st">Vary: Origin</span><span class="ch">\r\n</span><span class="st">Via: 1.1 vegur</span><span class="ch">\r\n\r\n</span><span class="st">{</span><span class="ch">\&quot;</span><span class="st">ip</span><span class="ch">\&quot;</span><span class="st">:</span><span class="ch">\&quot;</span><span class="st">190.154.48.130</span><span class="ch">\&quot;</span><span class="st">}&quot;</span></a>
<a class="sourceLine" id="cb104-10" data-line-number="10"><span class="fu">}</span></a></code></pre></div>
</div>
<p><a name="actions:remove_contact_groups"></a></p>
<h2 id="remove_contact_groups">remove_contact_groups</h2>
<p>remove_contact_groups can be used to remove a contact from one or more groups. A <code>contact_groups_removed</code> event will be created for the groups which the contact is removed from. If no groups are specified, then the contact will be removed from all groups.</p>
<div class="input_action">
<h3>
Action
</h3>
<div class="sourceCode" id="cb105"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb105-1" data-line-number="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb105-2" data-line-number="2">  <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;remove_contact_groups&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb105-3" data-line-number="3">  <span class="dt">&quot;uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;8eebd020-1af5-431c-b943-aa670fc74da9&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb105-4" data-line-number="4">  <span class="dt">&quot;groups&quot;</span><span class="fu">:</span> <span class="ot">[</span></a>
<a class="sourceLine" id="cb105-5" data-line-number="5">    <span class="fu">{</span></a>
<a class="sourceLine" id="cb105-6" data-line-number="6">      <span class="dt">&quot;uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;b7cf0d83-f1c9-411c-96fd-c511a4cfa86d&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb105-7" data-line-number="7">      <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;Registered Users&quot;</span></a>
<a class="sourceLine" id="cb105-8" data-line-number="8">    <span class="fu">}</span></a>
<a class="sourceLine" id="cb105-9" data-line-number="9">  <span class="ot">]</span></a>
<a class="sourceLine" id="cb105-10" data-line-number="10"><span class="fu">}</span></a></code></pre></div>
</div>
<div class="output_event">
<h3>
Event
</h3>
<div class="sourceCode" id="cb106"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb106-1" data-line-number="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb106-2" data-line-number="2">    <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;contact_groups_removed&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb106-3" data-line-number="3">    <span class="dt">&quot;created_on&quot;</span><span class="fu">:</span> <span class="st">&quot;2018-04-02T16:39:03.490522945Z&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb106-4" data-line-number="4">    <span class="dt">&quot;step_uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;98256781-4b91-441a-8680-9a3a5d208b9c&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb106-5" data-line-number="5">    <span class="dt">&quot;groups&quot;</span><span class="fu">:</span> <span class="ot">[</span></a>
<a class="sourceLine" id="cb106-6" data-line-number="6">        <span class="fu">{</span></a>
<a class="sourceLine" id="cb106-7" data-line-number="7">            <span class="dt">&quot;uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;b7cf0d83-f1c9-411c-96fd-c511a4cfa86d&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb106-8" data-line-number="8">            <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;Testers&quot;</span></a>
<a class="sourceLine" id="cb106-9" data-line-number="9">        <span class="fu">}</span></a>
<a class="sourceLine" id="cb106-10" data-line-number="10">    <span class="ot">]</span></a>
<a class="sourceLine" id="cb106-11" data-line-number="11"><span class="fu">}</span></a></code></pre></div>
</div>
<p><a name="actions:send_broadcast"></a></p>
<h2 id="send_broadcast">send_broadcast</h2>
<p>send_broadcast can be used to send a message to one or more contacts. It accepts a list of URNs, a list of groups and a list of contacts.</p>
<p>The URNs and text fields may be templates. A <code>send_broadcast</code> event will be created for each unique urn, contact and group with the evaluated text.</p>
<div class="input_action">
<h3>
Action
</h3>
<div class="sourceCode" id="cb107"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb107-1" data-line-number="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb107-2" data-line-number="2">  <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;send_broadcast&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb107-3" data-line-number="3">  <span class="dt">&quot;uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;8eebd020-1af5-431c-b943-aa670fc74da9&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb107-4" data-line-number="4">  <span class="dt">&quot;text&quot;</span><span class="fu">:</span> <span class="st">&quot;Hi @contact.name, are you ready to complete today&#39;s survey?&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb107-5" data-line-number="5">  <span class="dt">&quot;attachments&quot;</span><span class="fu">:</span> <span class="kw">null</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb107-6" data-line-number="6">  <span class="dt">&quot;urns&quot;</span><span class="fu">:</span> <span class="ot">[</span></a>
<a class="sourceLine" id="cb107-7" data-line-number="7">    <span class="st">&quot;tel:+12065551212&quot;</span></a>
<a class="sourceLine" id="cb107-8" data-line-number="8">  <span class="ot">]</span></a>
<a class="sourceLine" id="cb107-9" data-line-number="9"><span class="fu">}</span></a></code></pre></div>
</div>
<div class="output_event">
<h3>
Event
</h3>
<div class="sourceCode" id="cb108"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb108-1" data-line-number="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb108-2" data-line-number="2">    <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;broadcast_created&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb108-3" data-line-number="3">    <span class="dt">&quot;created_on&quot;</span><span class="fu">:</span> <span class="st">&quot;2018-04-02T16:39:03.491277412Z&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb108-4" data-line-number="4">    <span class="dt">&quot;step_uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;c54108a1-79b1-4703-a65c-9298b372f536&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb108-5" data-line-number="5">    <span class="dt">&quot;translations&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb108-6" data-line-number="6">        <span class="dt">&quot;&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb108-7" data-line-number="7">            <span class="dt">&quot;text&quot;</span><span class="fu">:</span> <span class="st">&quot;Hi Ryan Lewis, are you ready to complete today&#39;s survey?&quot;</span></a>
<a class="sourceLine" id="cb108-8" data-line-number="8">        <span class="fu">}</span></a>
<a class="sourceLine" id="cb108-9" data-line-number="9">    <span class="fu">},</span></a>
<a class="sourceLine" id="cb108-10" data-line-number="10">    <span class="dt">&quot;base_language&quot;</span><span class="fu">:</span> <span class="st">&quot;&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb108-11" data-line-number="11">    <span class="dt">&quot;urns&quot;</span><span class="fu">:</span> <span class="ot">[</span></a>
<a class="sourceLine" id="cb108-12" data-line-number="12">        <span class="st">&quot;tel:+12065551212&quot;</span></a>
<a class="sourceLine" id="cb108-13" data-line-number="13">    <span class="ot">]</span></a>
<a class="sourceLine" id="cb108-14" data-line-number="14"><span class="fu">}</span></a></code></pre></div>
</div>
<p><a name="actions:send_email"></a></p>
<h2 id="send_email">send_email</h2>
<p>send_email can be used to send an email to one or more recipients. The subject, body and addresses can all contain expressions.</p>
<p>A <code>email_created</code> event will be created for each email address.</p>
<div class="input_action">
<h3>
Action
</h3>
<div class="sourceCode" id="cb109"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb109-1" data-line-number="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb109-2" data-line-number="2">  <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;send_email&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb109-3" data-line-number="3">  <span class="dt">&quot;uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;8eebd020-1af5-431c-b943-aa670fc74da9&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb109-4" data-line-number="4">  <span class="dt">&quot;addresses&quot;</span><span class="fu">:</span> <span class="ot">[</span></a>
<a class="sourceLine" id="cb109-5" data-line-number="5">    <span class="st">&quot;@contact.urns.email&quot;</span></a>
<a class="sourceLine" id="cb109-6" data-line-number="6">  <span class="ot">]</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb109-7" data-line-number="7">  <span class="dt">&quot;subject&quot;</span><span class="fu">:</span> <span class="st">&quot;Here is your activation token&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb109-8" data-line-number="8">  <span class="dt">&quot;body&quot;</span><span class="fu">:</span> <span class="st">&quot;Your activation token is @contact.fields.activation_token&quot;</span></a>
<a class="sourceLine" id="cb109-9" data-line-number="9"><span class="fu">}</span></a></code></pre></div>
</div>
<div class="output_event">
<h3>
Event
</h3>
<div class="sourceCode" id="cb110"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb110-1" data-line-number="1"><span class="ot">[</span></a>
<a class="sourceLine" id="cb110-2" data-line-number="2">    <span class="fu">{</span></a>
<a class="sourceLine" id="cb110-3" data-line-number="3">        <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;error&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb110-4" data-line-number="4">        <span class="dt">&quot;created_on&quot;</span><span class="fu">:</span> <span class="st">&quot;2018-04-02T16:39:03.491966668Z&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb110-5" data-line-number="5">        <span class="dt">&quot;step_uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;b2a94792-54e4-4b3e-9dab-9b6ed6bdf3a3&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb110-6" data-line-number="6">        <span class="dt">&quot;text&quot;</span><span class="fu">:</span> <span class="st">&quot;no such contact field &#39;activation_token&#39;&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb110-7" data-line-number="7">        <span class="dt">&quot;fatal&quot;</span><span class="fu">:</span> <span class="kw">false</span></a>
<a class="sourceLine" id="cb110-8" data-line-number="8">    <span class="fu">}</span><span class="ot">,</span></a>
<a class="sourceLine" id="cb110-9" data-line-number="9">    <span class="fu">{</span></a>
<a class="sourceLine" id="cb110-10" data-line-number="10">        <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;error&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb110-11" data-line-number="11">        <span class="dt">&quot;created_on&quot;</span><span class="fu">:</span> <span class="st">&quot;2018-04-02T16:39:03.491972236Z&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb110-12" data-line-number="12">        <span class="dt">&quot;step_uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;b2a94792-54e4-4b3e-9dab-9b6ed6bdf3a3&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb110-13" data-line-number="13">        <span class="dt">&quot;text&quot;</span><span class="fu">:</span> <span class="st">&quot;unknown URN scheme: email&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb110-14" data-line-number="14">        <span class="dt">&quot;fatal&quot;</span><span class="fu">:</span> <span class="kw">false</span></a>
<a class="sourceLine" id="cb110-15" data-line-number="15">    <span class="fu">}</span><span class="ot">,</span></a>
<a class="sourceLine" id="cb110-16" data-line-number="16">    <span class="fu">{</span></a>
<a class="sourceLine" id="cb110-17" data-line-number="17">        <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;error&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb110-18" data-line-number="18">        <span class="dt">&quot;created_on&quot;</span><span class="fu">:</span> <span class="st">&quot;2018-04-02T16:39:03.49197799Z&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb110-19" data-line-number="19">        <span class="dt">&quot;step_uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;b2a94792-54e4-4b3e-9dab-9b6ed6bdf3a3&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb110-20" data-line-number="20">        <span class="dt">&quot;text&quot;</span><span class="fu">:</span> <span class="st">&quot;send_email address evaluated to empty string, skipping&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb110-21" data-line-number="21">        <span class="dt">&quot;fatal&quot;</span><span class="fu">:</span> <span class="kw">false</span></a>
<a class="sourceLine" id="cb110-22" data-line-number="22">    <span class="fu">}</span></a>
<a class="sourceLine" id="cb110-23" data-line-number="23"><span class="ot">]</span></a></code></pre></div>
</div>
<p><a name="actions:send_msg"></a></p>
<h2 id="send_msg">send_msg</h2>
<p>send_msg can be used to reply to the current contact in a flow. The text field may contain templates.</p>
<p>A <code>broadcast_created</code> event will be created with the evaluated text.</p>
<div class="input_action">
<h3>
Action
</h3>
<div class="sourceCode" id="cb111"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb111-1" data-line-number="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb111-2" data-line-number="2">  <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;send_msg&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb111-3" data-line-number="3">  <span class="dt">&quot;uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;8eebd020-1af5-431c-b943-aa670fc74da9&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb111-4" data-line-number="4">  <span class="dt">&quot;text&quot;</span><span class="fu">:</span> <span class="st">&quot;Hi @contact.name, are you ready to complete today&#39;s survey?&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb111-5" data-line-number="5">  <span class="dt">&quot;attachments&quot;</span><span class="fu">:</span> <span class="ot">[]</span></a>
<a class="sourceLine" id="cb111-6" data-line-number="6"><span class="fu">}</span></a></code></pre></div>
</div>
<div class="output_event">
<h3>
Event
</h3>
<div class="sourceCode" id="cb112"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb112-1" data-line-number="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb112-2" data-line-number="2">    <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;msg_created&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb112-3" data-line-number="3">    <span class="dt">&quot;created_on&quot;</span><span class="fu">:</span> <span class="st">&quot;2018-04-02T16:39:03.492564183Z&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb112-4" data-line-number="4">    <span class="dt">&quot;step_uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;d88eac17-9f5d-4ad0-a23f-cba1e9181435&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb112-5" data-line-number="5">    <span class="dt">&quot;msg&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb112-6" data-line-number="6">        <span class="dt">&quot;uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;6b999817-35f8-4ef8-8569-ae083e2b4016&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb112-7" data-line-number="7">        <span class="dt">&quot;urn&quot;</span><span class="fu">:</span> <span class="st">&quot;tel:+12065551212&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb112-8" data-line-number="8">        <span class="dt">&quot;channel&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb112-9" data-line-number="9">            <span class="dt">&quot;uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;57f1078f-88aa-46f4-a59a-948a5739c03d&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb112-10" data-line-number="10">            <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;Android Channel&quot;</span></a>
<a class="sourceLine" id="cb112-11" data-line-number="11">        <span class="fu">},</span></a>
<a class="sourceLine" id="cb112-12" data-line-number="12">        <span class="dt">&quot;text&quot;</span><span class="fu">:</span> <span class="st">&quot;Hi Ryan Lewis, are you ready to complete today&#39;s survey?&quot;</span></a>
<a class="sourceLine" id="cb112-13" data-line-number="13">    <span class="fu">}</span></a>
<a class="sourceLine" id="cb112-14" data-line-number="14"><span class="fu">}</span></a></code></pre></div>
</div>
<p><a name="actions:set_contact_field"></a></p>
<h2 id="set_contact_field">set_contact_field</h2>
<p>set_contact_field can be used to save a value to a contact. The value can be a template and will be evaluated during the flow. A <code>contact_field_changed</code> event will be created with the corresponding value.</p>
<div class="input_action">
<h3>
Action
</h3>
<div class="sourceCode" id="cb113"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb113-1" data-line-number="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb113-2" data-line-number="2">  <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;set_contact_field&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb113-3" data-line-number="3">  <span class="dt">&quot;uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;8eebd020-1af5-431c-b943-aa670fc74da9&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb113-4" data-line-number="4">  <span class="dt">&quot;field&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb113-5" data-line-number="5">    <span class="dt">&quot;key&quot;</span><span class="fu">:</span> <span class="st">&quot;gender&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb113-6" data-line-number="6">    <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;Gender&quot;</span></a>
<a class="sourceLine" id="cb113-7" data-line-number="7">  <span class="fu">},</span></a>
<a class="sourceLine" id="cb113-8" data-line-number="8">  <span class="dt">&quot;value&quot;</span><span class="fu">:</span> <span class="st">&quot;Male&quot;</span></a>
<a class="sourceLine" id="cb113-9" data-line-number="9"><span class="fu">}</span></a></code></pre></div>
</div>
<div class="output_event">
<h3>
Event
</h3>
<div class="sourceCode" id="cb114"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb114-1" data-line-number="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb114-2" data-line-number="2">    <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;contact_field_changed&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb114-3" data-line-number="3">    <span class="dt">&quot;created_on&quot;</span><span class="fu">:</span> <span class="st">&quot;2018-04-02T16:39:03.493158019Z&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb114-4" data-line-number="4">    <span class="dt">&quot;step_uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;db85b6e1-ea5b-4a43-8c5e-b7846530c34b&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb114-5" data-line-number="5">    <span class="dt">&quot;field&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb114-6" data-line-number="6">        <span class="dt">&quot;key&quot;</span><span class="fu">:</span> <span class="st">&quot;gender&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb114-7" data-line-number="7">        <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;Gender&quot;</span></a>
<a class="sourceLine" id="cb114-8" data-line-number="8">    <span class="fu">},</span></a>
<a class="sourceLine" id="cb114-9" data-line-number="9">    <span class="dt">&quot;value&quot;</span><span class="fu">:</span> <span class="st">&quot;Male&quot;</span></a>
<a class="sourceLine" id="cb114-10" data-line-number="10"><span class="fu">}</span></a></code></pre></div>
</div>
<p><a name="actions:set_contact_property"></a></p>
<h2 id="set_contact_property">set_contact_property</h2>
<p>set_contact_property can be used to update one of the built in fields for a contact of ‚Äúname‚Äù or ‚Äúlanguage‚Äù. An <code>contact_property_changed</code> event will be created with the corresponding values.</p>
<div class="input_action">
<h3>
Action
</h3>
<div class="sourceCode" id="cb115"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb115-1" data-line-number="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb115-2" data-line-number="2">  <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;set_contact_property&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb115-3" data-line-number="3">  <span class="dt">&quot;uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;8eebd020-1af5-431c-b943-aa670fc74da9&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb115-4" data-line-number="4">  <span class="dt">&quot;property&quot;</span><span class="fu">:</span> <span class="st">&quot;language&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb115-5" data-line-number="5">  <span class="dt">&quot;value&quot;</span><span class="fu">:</span> <span class="st">&quot;eng&quot;</span></a>
<a class="sourceLine" id="cb115-6" data-line-number="6"><span class="fu">}</span></a></code></pre></div>
</div>
<div class="output_event">
<h3>
Event
</h3>
<div class="sourceCode" id="cb116"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb116-1" data-line-number="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb116-2" data-line-number="2">    <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;contact_property_changed&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb116-3" data-line-number="3">    <span class="dt">&quot;created_on&quot;</span><span class="fu">:</span> <span class="st">&quot;2018-04-02T16:39:03.493726726Z&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb116-4" data-line-number="4">    <span class="dt">&quot;step_uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;4db640f2-3c1a-4940-95c1-460046f7dab1&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb116-5" data-line-number="5">    <span class="dt">&quot;property&quot;</span><span class="fu">:</span> <span class="st">&quot;language&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb116-6" data-line-number="6">    <span class="dt">&quot;value&quot;</span><span class="fu">:</span> <span class="st">&quot;eng&quot;</span></a>
<a class="sourceLine" id="cb116-7" data-line-number="7"><span class="fu">}</span></a></code></pre></div>
</div>
<p><a name="actions:set_run_result"></a></p>
<h2 id="set_run_result">set_run_result</h2>
<p>set_run_result can be used to save a result for a flow. The result will be available in the context for the run as <span class="citation" data-cites="run.results">@run.results</span>.[name]. The optional category can be used as a way of categorizing results, this can be useful for reporting or analytics.</p>
<p>Both the value and category fields may be templates. A <code>run_result_changed</code> event will be created with the final values.</p>
<div class="input_action">
<h3>
Action
</h3>
<div class="sourceCode" id="cb117"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb117-1" data-line-number="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb117-2" data-line-number="2">  <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;set_run_result&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb117-3" data-line-number="3">  <span class="dt">&quot;uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;8eebd020-1af5-431c-b943-aa670fc74da9&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb117-4" data-line-number="4">  <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;Gender&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb117-5" data-line-number="5">  <span class="dt">&quot;value&quot;</span><span class="fu">:</span> <span class="st">&quot;m&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb117-6" data-line-number="6">  <span class="dt">&quot;category&quot;</span><span class="fu">:</span> <span class="st">&quot;Male&quot;</span></a>
<a class="sourceLine" id="cb117-7" data-line-number="7"><span class="fu">}</span></a></code></pre></div>
</div>
<div class="output_event">
<h3>
Event
</h3>
<div class="sourceCode" id="cb118"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb118-1" data-line-number="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb118-2" data-line-number="2">    <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;run_result_changed&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb118-3" data-line-number="3">    <span class="dt">&quot;created_on&quot;</span><span class="fu">:</span> <span class="st">&quot;2018-04-02T16:39:03.494255277Z&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb118-4" data-line-number="4">    <span class="dt">&quot;step_uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;1e579292-5c93-488a-9930-be4c0949da92&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb118-5" data-line-number="5">    <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;Gender&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb118-6" data-line-number="6">    <span class="dt">&quot;value&quot;</span><span class="fu">:</span> <span class="st">&quot;m&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb118-7" data-line-number="7">    <span class="dt">&quot;category&quot;</span><span class="fu">:</span> <span class="st">&quot;Male&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb118-8" data-line-number="8">    <span class="dt">&quot;node_uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;72a1f5df-49f9-45df-94c9-d86f7ea064e5&quot;</span></a>
<a class="sourceLine" id="cb118-9" data-line-number="9"><span class="fu">}</span></a></code></pre></div>
</div>
<p><a name="actions:start_flow"></a></p>
<h2 id="start_flow">start_flow</h2>
<p>start_flow can be used to start a contact down another flow. The current flow will pause until the subflow exits or expires.</p>
<p>A <code>flow_entered</code> event will be created when the flow is started, a <code>flow_exited</code> event will be created upon the subflows exit.</p>
<div class="input_action">
<h3>
Action
</h3>
<div class="sourceCode" id="cb119"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb119-1" data-line-number="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb119-2" data-line-number="2">  <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;start_flow&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb119-3" data-line-number="3">  <span class="dt">&quot;uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;8eebd020-1af5-431c-b943-aa670fc74da9&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb119-4" data-line-number="4">  <span class="dt">&quot;flow&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb119-5" data-line-number="5">    <span class="dt">&quot;uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;b7cf0d83-f1c9-411c-96fd-c511a4cfa86d&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb119-6" data-line-number="6">    <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;Collect Language&quot;</span></a>
<a class="sourceLine" id="cb119-7" data-line-number="7">  <span class="fu">}</span></a>
<a class="sourceLine" id="cb119-8" data-line-number="8"><span class="fu">}</span></a></code></pre></div>
</div>
<div class="output_event">
<h3>
Event
</h3>
<div class="sourceCode" id="cb120"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb120-1" data-line-number="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb120-2" data-line-number="2">    <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;flow_triggered&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb120-3" data-line-number="3">    <span class="dt">&quot;created_on&quot;</span><span class="fu">:</span> <span class="st">&quot;2018-04-02T16:39:03.494831259Z&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb120-4" data-line-number="4">    <span class="dt">&quot;step_uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;fddddee2-48b5-4ea7-9710-c43c4715516d&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb120-5" data-line-number="5">    <span class="dt">&quot;flow&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb120-6" data-line-number="6">        <span class="dt">&quot;uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;b7cf0d83-f1c9-411c-96fd-c511a4cfa86d&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb120-7" data-line-number="7">        <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;Collect Language&quot;</span></a>
<a class="sourceLine" id="cb120-8" data-line-number="8">    <span class="fu">},</span></a>
<a class="sourceLine" id="cb120-9" data-line-number="9">    <span class="dt">&quot;parent_run_uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;d444720f-eebc-465e-a3f7-711c143cb933&quot;</span></a>
<a class="sourceLine" id="cb120-10" data-line-number="10"><span class="fu">}</span></a></code></pre></div>
</div>
<p><a name="actions:start_session"></a></p>
<h2 id="start_session">start_session</h2>
<p>start_session can be used to trigger sessions for other contacts and groups</p>
<div class="input_action">
<h3>
Action
</h3>
<div class="sourceCode" id="cb121"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb121-1" data-line-number="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb121-2" data-line-number="2">  <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;start_session&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb121-3" data-line-number="3">  <span class="dt">&quot;uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;8eebd020-1af5-431c-b943-aa670fc74da9&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb121-4" data-line-number="4">  <span class="dt">&quot;groups&quot;</span><span class="fu">:</span> <span class="ot">[</span></a>
<a class="sourceLine" id="cb121-5" data-line-number="5">    <span class="fu">{</span></a>
<a class="sourceLine" id="cb121-6" data-line-number="6">      <span class="dt">&quot;uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;1e1ce1e1-9288-4504-869e-022d1003c72a&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb121-7" data-line-number="7">      <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;Customers&quot;</span></a>
<a class="sourceLine" id="cb121-8" data-line-number="8">    <span class="fu">}</span></a>
<a class="sourceLine" id="cb121-9" data-line-number="9">  <span class="ot">]</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb121-10" data-line-number="10">  <span class="dt">&quot;flow&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb121-11" data-line-number="11">    <span class="dt">&quot;uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;b7cf0d83-f1c9-411c-96fd-c511a4cfa86d&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb121-12" data-line-number="12">    <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;Registration&quot;</span></a>
<a class="sourceLine" id="cb121-13" data-line-number="13">  <span class="fu">}</span></a>
<a class="sourceLine" id="cb121-14" data-line-number="14"><span class="fu">}</span></a></code></pre></div>
</div>
<div class="output_event">
<h3>
Event
</h3>
<div class="sourceCode" id="cb122"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb122-1" data-line-number="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb122-2" data-line-number="2">    <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;session_triggered&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb122-3" data-line-number="3">    <span class="dt">&quot;created_on&quot;</span><span class="fu">:</span> <span class="st">&quot;2018-04-02T16:39:03.495516038Z&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb122-4" data-line-number="4">    <span class="dt">&quot;step_uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;aac8219b-38f2-4b6f-84d0-f1236eb2f066&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb122-5" data-line-number="5">    <span class="dt">&quot;flow&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb122-6" data-line-number="6">        <span class="dt">&quot;uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;b7cf0d83-f1c9-411c-96fd-c511a4cfa86d&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb122-7" data-line-number="7">        <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;Registration&quot;</span></a>
<a class="sourceLine" id="cb122-8" data-line-number="8">    <span class="fu">},</span></a>
<a class="sourceLine" id="cb122-9" data-line-number="9">    <span class="dt">&quot;groups&quot;</span><span class="fu">:</span> <span class="ot">[</span></a>
<a class="sourceLine" id="cb122-10" data-line-number="10">        <span class="fu">{</span></a>
<a class="sourceLine" id="cb122-11" data-line-number="11">            <span class="dt">&quot;uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;1e1ce1e1-9288-4504-869e-022d1003c72a&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb122-12" data-line-number="12">            <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;Customers&quot;</span></a>
<a class="sourceLine" id="cb122-13" data-line-number="13">        <span class="fu">}</span></a>
<a class="sourceLine" id="cb122-14" data-line-number="14">    <span class="ot">]</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb122-15" data-line-number="15">    <span class="dt">&quot;run&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb122-16" data-line-number="16">        <span class="dt">&quot;uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;2ce70f65-701b-428c-983a-b08d861f5777&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb122-17" data-line-number="17">        <span class="dt">&quot;flow_uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;50c3706e-fedb-42c0-8eab-dda3335714b7&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb122-18" data-line-number="18">        <span class="dt">&quot;contact&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb122-19" data-line-number="19">            <span class="dt">&quot;uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;5d76d86b-3bb9-4d5a-b822-c9d86f5d8e4f&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb122-20" data-line-number="20">            <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;Ryan Lewis&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb122-21" data-line-number="21">            <span class="dt">&quot;language&quot;</span><span class="fu">:</span> <span class="st">&quot;&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb122-22" data-line-number="22">            <span class="dt">&quot;timezone&quot;</span><span class="fu">:</span> <span class="st">&quot;UTC&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb122-23" data-line-number="23">            <span class="dt">&quot;urns&quot;</span><span class="fu">:</span> <span class="ot">[</span></a>
<a class="sourceLine" id="cb122-24" data-line-number="24">                <span class="st">&quot;tel:+12065551212&quot;</span><span class="ot">,</span></a>
<a class="sourceLine" id="cb122-25" data-line-number="25">                <span class="st">&quot;mailto:foo@bar.com&quot;</span></a>
<a class="sourceLine" id="cb122-26" data-line-number="26">            <span class="ot">]</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb122-27" data-line-number="27">            <span class="dt">&quot;groups&quot;</span><span class="fu">:</span> <span class="ot">[</span></a>
<a class="sourceLine" id="cb122-28" data-line-number="28">                <span class="fu">{</span></a>
<a class="sourceLine" id="cb122-29" data-line-number="29">                    <span class="dt">&quot;uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;b7cf0d83-f1c9-411c-96fd-c511a4cfa86d&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb122-30" data-line-number="30">                    <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;Testers&quot;</span></a>
<a class="sourceLine" id="cb122-31" data-line-number="31">                <span class="fu">}</span></a>
<a class="sourceLine" id="cb122-32" data-line-number="32">            <span class="ot">]</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb122-33" data-line-number="33">            <span class="dt">&quot;fields&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb122-34" data-line-number="34">                <span class="dt">&quot;gender&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb122-35" data-line-number="35">                    <span class="dt">&quot;text&quot;</span><span class="fu">:</span> <span class="st">&quot;Male&quot;</span></a>
<a class="sourceLine" id="cb122-36" data-line-number="36">                <span class="fu">}</span></a>
<a class="sourceLine" id="cb122-37" data-line-number="37">            <span class="fu">}</span></a>
<a class="sourceLine" id="cb122-38" data-line-number="38">        <span class="fu">},</span></a>
<a class="sourceLine" id="cb122-39" data-line-number="39">        <span class="dt">&quot;status&quot;</span><span class="fu">:</span> <span class="st">&quot;active&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb122-40" data-line-number="40">        <span class="dt">&quot;results&quot;</span><span class="fu">:</span> <span class="fu">{}</span></a>
<a class="sourceLine" id="cb122-41" data-line-number="41">    <span class="fu">}</span></a>
<a class="sourceLine" id="cb122-42" data-line-number="42"><span class="fu">}</span></a></code></pre></div>
</div>
</div>
<h1 id="event-definitions">Event Definitions</h1>
<p>Events are the output of a flow run and represent instructions to the engine container on what actions should be taken due to the flow execution. All templates in events have been evaluated and can be used to create concrete messages, contact updates, emails etc by the container.</p>
<div class="events">
<p><a name="events:broadcast_created"></a></p>
<h2 id="broadcast_created">broadcast_created</h2>
<p>broadcast_created events are created for outgoing broadcasts.</p>
<div class="output_event">
<h3>
Event
</h3>
<div class="sourceCode" id="cb123"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb123-1" data-line-number="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb123-2" data-line-number="2">    <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;broadcast_created&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb123-3" data-line-number="3">    <span class="dt">&quot;created_on&quot;</span><span class="fu">:</span> <span class="st">&quot;2006-01-02T15:04:05Z&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb123-4" data-line-number="4">    <span class="dt">&quot;translations&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb123-5" data-line-number="5">        <span class="dt">&quot;eng&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb123-6" data-line-number="6">            <span class="dt">&quot;text&quot;</span><span class="fu">:</span> <span class="st">&quot;hi, what&#39;s up&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb123-7" data-line-number="7">            <span class="dt">&quot;quick_replies&quot;</span><span class="fu">:</span> <span class="ot">[</span></a>
<a class="sourceLine" id="cb123-8" data-line-number="8">                <span class="st">&quot;All good&quot;</span><span class="ot">,</span></a>
<a class="sourceLine" id="cb123-9" data-line-number="9">                <span class="st">&quot;Got 99 problems&quot;</span></a>
<a class="sourceLine" id="cb123-10" data-line-number="10">            <span class="ot">]</span></a>
<a class="sourceLine" id="cb123-11" data-line-number="11">        <span class="fu">},</span></a>
<a class="sourceLine" id="cb123-12" data-line-number="12">        <span class="dt">&quot;spa&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb123-13" data-line-number="13">            <span class="dt">&quot;text&quot;</span><span class="fu">:</span> <span class="st">&quot;Que pasa&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb123-14" data-line-number="14">            <span class="dt">&quot;quick_replies&quot;</span><span class="fu">:</span> <span class="ot">[</span></a>
<a class="sourceLine" id="cb123-15" data-line-number="15">                <span class="st">&quot;Todo bien&quot;</span><span class="ot">,</span></a>
<a class="sourceLine" id="cb123-16" data-line-number="16">                <span class="st">&quot;Tengo 99 problemas&quot;</span></a>
<a class="sourceLine" id="cb123-17" data-line-number="17">            <span class="ot">]</span></a>
<a class="sourceLine" id="cb123-18" data-line-number="18">        <span class="fu">}</span></a>
<a class="sourceLine" id="cb123-19" data-line-number="19">    <span class="fu">},</span></a>
<a class="sourceLine" id="cb123-20" data-line-number="20">    <span class="dt">&quot;base_language&quot;</span><span class="fu">:</span> <span class="st">&quot;eng&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb123-21" data-line-number="21">    <span class="dt">&quot;urns&quot;</span><span class="fu">:</span> <span class="ot">[</span></a>
<a class="sourceLine" id="cb123-22" data-line-number="22">        <span class="st">&quot;tel:+12065551212&quot;</span></a>
<a class="sourceLine" id="cb123-23" data-line-number="23">    <span class="ot">]</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb123-24" data-line-number="24">    <span class="dt">&quot;contacts&quot;</span><span class="fu">:</span> <span class="ot">[</span></a>
<a class="sourceLine" id="cb123-25" data-line-number="25">        <span class="fu">{</span></a>
<a class="sourceLine" id="cb123-26" data-line-number="26">            <span class="dt">&quot;uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;0e06f977-cbb7-475f-9d0b-a0c4aaec7f6a&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb123-27" data-line-number="27">            <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;Bob&quot;</span></a>
<a class="sourceLine" id="cb123-28" data-line-number="28">        <span class="fu">}</span></a>
<a class="sourceLine" id="cb123-29" data-line-number="29">    <span class="ot">]</span></a>
<a class="sourceLine" id="cb123-30" data-line-number="30"><span class="fu">}</span></a></code></pre></div>
</div>
<p><a name="events:contact_changed"></a></p>
<h2 id="contact_changed">contact_changed</h2>
<p>contact_changed events are created to set a contact on a session</p>
<div class="output_event">
<h3>
Event
</h3>
<div class="sourceCode" id="cb124"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb124-1" data-line-number="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb124-2" data-line-number="2">    <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;contact_changed&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb124-3" data-line-number="3">    <span class="dt">&quot;created_on&quot;</span><span class="fu">:</span> <span class="st">&quot;2006-01-02T15:04:05Z&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb124-4" data-line-number="4">    <span class="dt">&quot;contact&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb124-5" data-line-number="5">        <span class="dt">&quot;uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;0e06f977-cbb7-475f-9d0b-a0c4aaec7f6a&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb124-6" data-line-number="6">        <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;Bob&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb124-7" data-line-number="7">        <span class="dt">&quot;urns&quot;</span><span class="fu">:</span> <span class="ot">[</span></a>
<a class="sourceLine" id="cb124-8" data-line-number="8">            <span class="st">&quot;tel:+11231234567&quot;</span></a>
<a class="sourceLine" id="cb124-9" data-line-number="9">        <span class="ot">]</span></a>
<a class="sourceLine" id="cb124-10" data-line-number="10">    <span class="fu">}</span></a>
<a class="sourceLine" id="cb124-11" data-line-number="11"><span class="fu">}</span></a></code></pre></div>
</div>
<p><a name="events:contact_channel_changed"></a></p>
<h2 id="contact_channel_changed">contact_channel_changed</h2>
<p>contact_channel_changed events are created when a contact‚Äôs preferred channel is changed.</p>
<div class="output_event">
<h3>
Event
</h3>
<div class="sourceCode" id="cb125"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb125-1" data-line-number="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb125-2" data-line-number="2">    <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;contact_channel_changed&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb125-3" data-line-number="3">    <span class="dt">&quot;created_on&quot;</span><span class="fu">:</span> <span class="st">&quot;2006-01-02T15:04:05Z&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb125-4" data-line-number="4">    <span class="dt">&quot;channel&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb125-5" data-line-number="5">        <span class="dt">&quot;uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;67a3ac69-e5e0-4ef0-8423-eddf71a71472&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb125-6" data-line-number="6">        <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;Twilio&quot;</span></a>
<a class="sourceLine" id="cb125-7" data-line-number="7">    <span class="fu">}</span></a>
<a class="sourceLine" id="cb125-8" data-line-number="8"><span class="fu">}</span></a></code></pre></div>
</div>
<p><a name="events:contact_field_changed"></a></p>
<h2 id="contact_field_changed">contact_field_changed</h2>
<p>contact_field_changed events are created when a contact field is updated.</p>
<div class="output_event">
<h3>
Event
</h3>
<div class="sourceCode" id="cb126"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb126-1" data-line-number="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb126-2" data-line-number="2">    <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;contact_field_changed&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb126-3" data-line-number="3">    <span class="dt">&quot;created_on&quot;</span><span class="fu">:</span> <span class="st">&quot;2006-01-02T15:04:05Z&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb126-4" data-line-number="4">    <span class="dt">&quot;field&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb126-5" data-line-number="5">        <span class="dt">&quot;key&quot;</span><span class="fu">:</span> <span class="st">&quot;gender&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb126-6" data-line-number="6">        <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;Gender&quot;</span></a>
<a class="sourceLine" id="cb126-7" data-line-number="7">    <span class="fu">},</span></a>
<a class="sourceLine" id="cb126-8" data-line-number="8">    <span class="dt">&quot;value&quot;</span><span class="fu">:</span> <span class="st">&quot;Male&quot;</span></a>
<a class="sourceLine" id="cb126-9" data-line-number="9"><span class="fu">}</span></a></code></pre></div>
</div>
<p><a name="events:contact_groups_added"></a></p>
<h2 id="contact_groups_added">contact_groups_added</h2>
<p>contact_groups_added events will be created with the groups a contact was added to.</p>
<div class="output_event">
<h3>
Event
</h3>
<div class="sourceCode" id="cb127"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb127-1" data-line-number="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb127-2" data-line-number="2">    <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;contact_groups_added&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb127-3" data-line-number="3">    <span class="dt">&quot;created_on&quot;</span><span class="fu">:</span> <span class="st">&quot;2006-01-02T15:04:05Z&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb127-4" data-line-number="4">    <span class="dt">&quot;groups&quot;</span><span class="fu">:</span> <span class="ot">[</span></a>
<a class="sourceLine" id="cb127-5" data-line-number="5">        <span class="fu">{</span></a>
<a class="sourceLine" id="cb127-6" data-line-number="6">            <span class="dt">&quot;uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;b7cf0d83-f1c9-411c-96fd-c511a4cfa86d&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb127-7" data-line-number="7">            <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;Reporters&quot;</span></a>
<a class="sourceLine" id="cb127-8" data-line-number="8">        <span class="fu">}</span></a>
<a class="sourceLine" id="cb127-9" data-line-number="9">    <span class="ot">]</span></a>
<a class="sourceLine" id="cb127-10" data-line-number="10"><span class="fu">}</span></a></code></pre></div>
</div>
<p><a name="events:contact_groups_removed"></a></p>
<h2 id="contact_groups_removed">contact_groups_removed</h2>
<p>contact_groups_removed events are created when a contact has been removed from one or more groups.</p>
<div class="output_event">
<h3>
Event
</h3>
<div class="sourceCode" id="cb128"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb128-1" data-line-number="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb128-2" data-line-number="2">    <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;contact_groups_removed&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb128-3" data-line-number="3">    <span class="dt">&quot;created_on&quot;</span><span class="fu">:</span> <span class="st">&quot;2006-01-02T15:04:05Z&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb128-4" data-line-number="4">    <span class="dt">&quot;groups&quot;</span><span class="fu">:</span> <span class="ot">[</span></a>
<a class="sourceLine" id="cb128-5" data-line-number="5">        <span class="fu">{</span></a>
<a class="sourceLine" id="cb128-6" data-line-number="6">            <span class="dt">&quot;uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;b7cf0d83-f1c9-411c-96fd-c511a4cfa86d&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb128-7" data-line-number="7">            <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;Reporters&quot;</span></a>
<a class="sourceLine" id="cb128-8" data-line-number="8">        <span class="fu">}</span></a>
<a class="sourceLine" id="cb128-9" data-line-number="9">    <span class="ot">]</span></a>
<a class="sourceLine" id="cb128-10" data-line-number="10"><span class="fu">}</span></a></code></pre></div>
</div>
<p><a name="events:contact_property_changed"></a></p>
<h2 id="contact_property_changed">contact_property_changed</h2>
<p>contact_property_changed events are created when a property of a contact has been changed</p>
<div class="output_event">
<h3>
Event
</h3>
<div class="sourceCode" id="cb129"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb129-1" data-line-number="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb129-2" data-line-number="2">    <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;contact_property_changed&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb129-3" data-line-number="3">    <span class="dt">&quot;created_on&quot;</span><span class="fu">:</span> <span class="st">&quot;2006-01-02T15:04:05Z&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb129-4" data-line-number="4">    <span class="dt">&quot;property&quot;</span><span class="fu">:</span> <span class="st">&quot;language&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb129-5" data-line-number="5">    <span class="dt">&quot;value&quot;</span><span class="fu">:</span> <span class="st">&quot;eng&quot;</span></a>
<a class="sourceLine" id="cb129-6" data-line-number="6"><span class="fu">}</span></a></code></pre></div>
</div>
<p><a name="events:contact_urn_added"></a></p>
<h2 id="contact_urn_added">contact_urn_added</h2>
<p>contact_urn_added events will be created with the URN that should be added to the current contact.</p>
<div class="output_event">
<h3>
Event
</h3>
<div class="sourceCode" id="cb130"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb130-1" data-line-number="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb130-2" data-line-number="2">    <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;contact_urn_added&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb130-3" data-line-number="3">    <span class="dt">&quot;created_on&quot;</span><span class="fu">:</span> <span class="st">&quot;2006-01-02T15:04:05Z&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb130-4" data-line-number="4">    <span class="dt">&quot;urn&quot;</span><span class="fu">:</span> <span class="st">&quot;tel:+12345678900&quot;</span></a>
<a class="sourceLine" id="cb130-5" data-line-number="5"><span class="fu">}</span></a></code></pre></div>
</div>
<p><a name="events:email_created"></a></p>
<h2 id="email_created">email_created</h2>
<p>email_created events are created for each recipient which should receive an email.</p>
<div class="output_event">
<h3>
Event
</h3>
<div class="sourceCode" id="cb131"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb131-1" data-line-number="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb131-2" data-line-number="2">    <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;email_created&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb131-3" data-line-number="3">    <span class="dt">&quot;created_on&quot;</span><span class="fu">:</span> <span class="st">&quot;2006-01-02T15:04:05Z&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb131-4" data-line-number="4">    <span class="dt">&quot;addresses&quot;</span><span class="fu">:</span> <span class="ot">[</span></a>
<a class="sourceLine" id="cb131-5" data-line-number="5">        <span class="st">&quot;foo@bar.com&quot;</span></a>
<a class="sourceLine" id="cb131-6" data-line-number="6">    <span class="ot">]</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb131-7" data-line-number="7">    <span class="dt">&quot;subject&quot;</span><span class="fu">:</span> <span class="st">&quot;Your activation token&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb131-8" data-line-number="8">    <span class="dt">&quot;body&quot;</span><span class="fu">:</span> <span class="st">&quot;Your activation token is AAFFKKEE&quot;</span></a>
<a class="sourceLine" id="cb131-9" data-line-number="9"><span class="fu">}</span></a></code></pre></div>
</div>
<p><a name="events:environment_changed"></a></p>
<h2 id="environment_changed">environment_changed</h2>
<p>environment_changed events are created to set the environment on a session</p>
<div class="output_event">
<h3>
Event
</h3>
<div class="sourceCode" id="cb132"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb132-1" data-line-number="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb132-2" data-line-number="2">    <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;environment_changed&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb132-3" data-line-number="3">    <span class="dt">&quot;created_on&quot;</span><span class="fu">:</span> <span class="st">&quot;2006-01-02T15:04:05Z&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb132-4" data-line-number="4">    <span class="dt">&quot;environment&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb132-5" data-line-number="5">        <span class="dt">&quot;date_format&quot;</span><span class="fu">:</span> <span class="st">&quot;yyyy-MM-dd&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb132-6" data-line-number="6">        <span class="dt">&quot;time_format&quot;</span><span class="fu">:</span> <span class="st">&quot;hh:mm&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb132-7" data-line-number="7">        <span class="dt">&quot;timezone&quot;</span><span class="fu">:</span> <span class="st">&quot;Africa/Kigali&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb132-8" data-line-number="8">        <span class="dt">&quot;languages&quot;</span><span class="fu">:</span> <span class="ot">[</span></a>
<a class="sourceLine" id="cb132-9" data-line-number="9">            <span class="st">&quot;eng&quot;</span><span class="ot">,</span></a>
<a class="sourceLine" id="cb132-10" data-line-number="10">            <span class="st">&quot;fra&quot;</span></a>
<a class="sourceLine" id="cb132-11" data-line-number="11">        <span class="ot">]</span></a>
<a class="sourceLine" id="cb132-12" data-line-number="12">    <span class="fu">}</span></a>
<a class="sourceLine" id="cb132-13" data-line-number="13"><span class="fu">}</span></a></code></pre></div>
</div>
<p><a name="events:error"></a></p>
<h2 id="error">error</h2>
<p>error events will be created whenever an error is encountered during flow execution. This can vary from template evaluation errors to invalid actions.</p>
<div class="output_event">
<h3>
Event
</h3>
<div class="sourceCode" id="cb133"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb133-1" data-line-number="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb133-2" data-line-number="2">    <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;error&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb133-3" data-line-number="3">    <span class="dt">&quot;created_on&quot;</span><span class="fu">:</span> <span class="st">&quot;2006-01-02T15:04:05Z&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb133-4" data-line-number="4">    <span class="dt">&quot;text&quot;</span><span class="fu">:</span> <span class="st">&quot;invalid date format: &#39;12th of October&#39;&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb133-5" data-line-number="5">    <span class="dt">&quot;fatal&quot;</span><span class="fu">:</span> <span class="kw">false</span></a>
<a class="sourceLine" id="cb133-6" data-line-number="6"><span class="fu">}</span></a></code></pre></div>
</div>
<p><a name="events:flow_triggered"></a></p>
<h2 id="flow_triggered">flow_triggered</h2>
<p>flow_triggered events are created when an action wants to start a subflow</p>
<div class="output_event">
<h3>
Event
</h3>
<div class="sourceCode" id="cb134"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb134-1" data-line-number="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb134-2" data-line-number="2">    <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;flow_triggered&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb134-3" data-line-number="3">    <span class="dt">&quot;created_on&quot;</span><span class="fu">:</span> <span class="st">&quot;2006-01-02T15:04:05Z&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb134-4" data-line-number="4">    <span class="dt">&quot;flow&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb134-5" data-line-number="5">        <span class="dt">&quot;uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;0e06f977-cbb7-475f-9d0b-a0c4aaec7f6a&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb134-6" data-line-number="6">        <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;Registration&quot;</span></a>
<a class="sourceLine" id="cb134-7" data-line-number="7">    <span class="fu">},</span></a>
<a class="sourceLine" id="cb134-8" data-line-number="8">    <span class="dt">&quot;parent_run_uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;95eb96df-461b-4668-b168-727f8ceb13dd&quot;</span></a>
<a class="sourceLine" id="cb134-9" data-line-number="9"><span class="fu">}</span></a></code></pre></div>
</div>
<p><a name="events:input_labels_added"></a></p>
<h2 id="input_labels_added">input_labels_added</h2>
<p>input_labels_added events will be created with the labels that were applied to the given input.</p>
<div class="output_event">
<h3>
Event
</h3>
<div class="sourceCode" id="cb135"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb135-1" data-line-number="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb135-2" data-line-number="2">    <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;input_labels_added&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb135-3" data-line-number="3">    <span class="dt">&quot;created_on&quot;</span><span class="fu">:</span> <span class="st">&quot;2006-01-02T15:04:05Z&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb135-4" data-line-number="4">    <span class="dt">&quot;input_uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;4aef4050-1895-4c80-999a-70368317a4f5&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb135-5" data-line-number="5">    <span class="dt">&quot;labels&quot;</span><span class="fu">:</span> <span class="ot">[</span></a>
<a class="sourceLine" id="cb135-6" data-line-number="6">        <span class="fu">{</span></a>
<a class="sourceLine" id="cb135-7" data-line-number="7">            <span class="dt">&quot;uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;b7cf0d83-f1c9-411c-96fd-c511a4cfa86d&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb135-8" data-line-number="8">            <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;Spam&quot;</span></a>
<a class="sourceLine" id="cb135-9" data-line-number="9">        <span class="fu">}</span></a>
<a class="sourceLine" id="cb135-10" data-line-number="10">    <span class="ot">]</span></a>
<a class="sourceLine" id="cb135-11" data-line-number="11"><span class="fu">}</span></a></code></pre></div>
</div>
<p><a name="events:msg_created"></a></p>
<h2 id="msg_created">msg_created</h2>
<p>msg_created events are used for replies to the session contact.</p>
<div class="output_event">
<h3>
Event
</h3>
<div class="sourceCode" id="cb136"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb136-1" data-line-number="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb136-2" data-line-number="2">    <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;msg_created&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb136-3" data-line-number="3">    <span class="dt">&quot;created_on&quot;</span><span class="fu">:</span> <span class="st">&quot;2006-01-02T15:04:05Z&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb136-4" data-line-number="4">    <span class="dt">&quot;msg&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb136-5" data-line-number="5">        <span class="dt">&quot;uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;2d611e17-fb22-457f-b802-b8f7ec5cda5b&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb136-6" data-line-number="6">        <span class="dt">&quot;urn&quot;</span><span class="fu">:</span> <span class="st">&quot;tel:+12065551212&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb136-7" data-line-number="7">        <span class="dt">&quot;channel&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb136-8" data-line-number="8">            <span class="dt">&quot;uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;61602f3e-f603-4c70-8a8f-c477505bf4bf&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb136-9" data-line-number="9">            <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;Twilio&quot;</span></a>
<a class="sourceLine" id="cb136-10" data-line-number="10">        <span class="fu">},</span></a>
<a class="sourceLine" id="cb136-11" data-line-number="11">        <span class="dt">&quot;text&quot;</span><span class="fu">:</span> <span class="st">&quot;hi there&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb136-12" data-line-number="12">        <span class="dt">&quot;attachments&quot;</span><span class="fu">:</span> <span class="ot">[</span></a>
<a class="sourceLine" id="cb136-13" data-line-number="13">            <span class="st">&quot;https://s3.amazon.com/mybucket/attachment.jpg&quot;</span></a>
<a class="sourceLine" id="cb136-14" data-line-number="14">        <span class="ot">]</span></a>
<a class="sourceLine" id="cb136-15" data-line-number="15">    <span class="fu">}</span></a>
<a class="sourceLine" id="cb136-16" data-line-number="16"><span class="fu">}</span></a></code></pre></div>
</div>
<p><a name="events:msg_received"></a></p>
<h2 id="msg_received">msg_received</h2>
<p>msg_received events are used for starting flows or resuming flows which are waiting for a message. They represent an incoming message for a contact.</p>
<div class="output_event">
<h3>
Event
</h3>
<div class="sourceCode" id="cb137"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb137-1" data-line-number="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb137-2" data-line-number="2">    <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;msg_received&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb137-3" data-line-number="3">    <span class="dt">&quot;created_on&quot;</span><span class="fu">:</span> <span class="st">&quot;2006-01-02T15:04:05Z&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb137-4" data-line-number="4">    <span class="dt">&quot;msg&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb137-5" data-line-number="5">        <span class="dt">&quot;uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;2d611e17-fb22-457f-b802-b8f7ec5cda5b&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb137-6" data-line-number="6">        <span class="dt">&quot;urn&quot;</span><span class="fu">:</span> <span class="st">&quot;tel:+12065551212&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb137-7" data-line-number="7">        <span class="dt">&quot;channel&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb137-8" data-line-number="8">            <span class="dt">&quot;uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;61602f3e-f603-4c70-8a8f-c477505bf4bf&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb137-9" data-line-number="9">            <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;Twilio&quot;</span></a>
<a class="sourceLine" id="cb137-10" data-line-number="10">        <span class="fu">},</span></a>
<a class="sourceLine" id="cb137-11" data-line-number="11">        <span class="dt">&quot;text&quot;</span><span class="fu">:</span> <span class="st">&quot;hi there&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb137-12" data-line-number="12">        <span class="dt">&quot;attachments&quot;</span><span class="fu">:</span> <span class="ot">[</span></a>
<a class="sourceLine" id="cb137-13" data-line-number="13">            <span class="st">&quot;https://s3.amazon.com/mybucket/attachment.jpg&quot;</span></a>
<a class="sourceLine" id="cb137-14" data-line-number="14">        <span class="ot">]</span></a>
<a class="sourceLine" id="cb137-15" data-line-number="15">    <span class="fu">}</span></a>
<a class="sourceLine" id="cb137-16" data-line-number="16"><span class="fu">}</span></a></code></pre></div>
</div>
<p><a name="events:msg_wait"></a></p>
<h2 id="msg_wait">msg_wait</h2>
<p>msg_wait events are created when a flow pauses waiting for a response from a contact. If a timeout is set, then the caller should resume the flow after the number of seconds in the timeout to resume it.</p>
<div class="output_event">
<h3>
Event
</h3>
<div class="sourceCode" id="cb138"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb138-1" data-line-number="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb138-2" data-line-number="2">    <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;msg_wait&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb138-3" data-line-number="3">    <span class="dt">&quot;created_on&quot;</span><span class="fu">:</span> <span class="st">&quot;2006-01-02T15:04:05Z&quot;</span></a>
<a class="sourceLine" id="cb138-4" data-line-number="4"><span class="fu">}</span></a></code></pre></div>
</div>
<p><a name="events:nothing_wait"></a></p>
<h2 id="nothing_wait">nothing_wait</h2>
<p>nothing_wait events are created when a flow requests to hand back control to the caller but isn‚Äôt waiting for anything from the caller.</p>
<div class="output_event">
<h3>
Event
</h3>
<div class="sourceCode" id="cb139"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb139-1" data-line-number="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb139-2" data-line-number="2">    <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;nothing_wait&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb139-3" data-line-number="3">    <span class="dt">&quot;created_on&quot;</span><span class="fu">:</span> <span class="st">&quot;2006-01-02T15:04:05.234532Z&quot;</span></a>
<a class="sourceLine" id="cb139-4" data-line-number="4"><span class="fu">}</span></a></code></pre></div>
</div>
<p><a name="events:run_expired"></a></p>
<h2 id="run_expired">run_expired</h2>
<p>run_expired events are sent by the caller to notify the engine that a run has expired</p>
<div class="output_event">
<h3>
Event
</h3>
<div class="sourceCode" id="cb140"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb140-1" data-line-number="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb140-2" data-line-number="2">    <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;run_expired&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb140-3" data-line-number="3">    <span class="dt">&quot;created_on&quot;</span><span class="fu">:</span> <span class="st">&quot;2006-01-02T15:04:05Z&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb140-4" data-line-number="4">    <span class="dt">&quot;run_uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;0e06f977-cbb7-475f-9d0b-a0c4aaec7f6a&quot;</span></a>
<a class="sourceLine" id="cb140-5" data-line-number="5"><span class="fu">}</span></a></code></pre></div>
</div>
<p><a name="events:run_result_changed"></a></p>
<h2 id="run_result_changed">run_result_changed</h2>
<p>run_result_changed events are created when a result is saved. They contain not only the name, value and category of the result, but also the UUID of the node where the result was generated.</p>
<div class="output_event">
<h3>
Event
</h3>
<div class="sourceCode" id="cb141"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb141-1" data-line-number="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb141-2" data-line-number="2">    <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;run_result_changed&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb141-3" data-line-number="3">    <span class="dt">&quot;created_on&quot;</span><span class="fu">:</span> <span class="st">&quot;2006-01-02T15:04:05Z&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb141-4" data-line-number="4">    <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;Gender&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb141-5" data-line-number="5">    <span class="dt">&quot;value&quot;</span><span class="fu">:</span> <span class="st">&quot;m&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb141-6" data-line-number="6">    <span class="dt">&quot;category&quot;</span><span class="fu">:</span> <span class="st">&quot;Male&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb141-7" data-line-number="7">    <span class="dt">&quot;category_localized&quot;</span><span class="fu">:</span> <span class="st">&quot;Homme&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb141-8" data-line-number="8">    <span class="dt">&quot;node_uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;b7cf0d83-f1c9-411c-96fd-c511a4cfa86d&quot;</span></a>
<a class="sourceLine" id="cb141-9" data-line-number="9"><span class="fu">}</span></a></code></pre></div>
</div>
<p><a name="events:session_triggered"></a></p>
<h2 id="session_triggered">session_triggered</h2>
<p>session_triggered events are created when an action wants to start a subflow</p>
<div class="output_event">
<h3>
Event
</h3>
<div class="sourceCode" id="cb142"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb142-1" data-line-number="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb142-2" data-line-number="2">    <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;session_triggered&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb142-3" data-line-number="3">    <span class="dt">&quot;created_on&quot;</span><span class="fu">:</span> <span class="st">&quot;2006-01-02T15:04:05Z&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb142-4" data-line-number="4">    <span class="dt">&quot;flow&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb142-5" data-line-number="5">        <span class="dt">&quot;uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;0e06f977-cbb7-475f-9d0b-a0c4aaec7f6a&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb142-6" data-line-number="6">        <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;Registration&quot;</span></a>
<a class="sourceLine" id="cb142-7" data-line-number="7">    <span class="fu">},</span></a>
<a class="sourceLine" id="cb142-8" data-line-number="8">    <span class="dt">&quot;groups&quot;</span><span class="fu">:</span> <span class="ot">[</span></a>
<a class="sourceLine" id="cb142-9" data-line-number="9">        <span class="fu">{</span></a>
<a class="sourceLine" id="cb142-10" data-line-number="10">            <span class="dt">&quot;uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;8f8e2cae-3c8d-4dce-9c4b-19514437e427&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb142-11" data-line-number="11">            <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;New contacts&quot;</span></a>
<a class="sourceLine" id="cb142-12" data-line-number="12">        <span class="fu">}</span></a>
<a class="sourceLine" id="cb142-13" data-line-number="13">    <span class="ot">]</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb142-14" data-line-number="14">    <span class="dt">&quot;run&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb142-15" data-line-number="15">        <span class="dt">&quot;uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;b7cf0d83-f1c9-411c-96fd-c511a4cfa86d&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb142-16" data-line-number="16">        <span class="dt">&quot;flow_uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;93c554a1-b90d-4892-b029-a2a87dec9b87&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb142-17" data-line-number="17">        <span class="dt">&quot;contact&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb142-18" data-line-number="18">            <span class="dt">&quot;uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;c59b0033-e748-4240-9d4c-e85eb6800151&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb142-19" data-line-number="19">            <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;Bob&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb142-20" data-line-number="20">            <span class="dt">&quot;fields&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb142-21" data-line-number="21">                <span class="dt">&quot;state&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb142-22" data-line-number="22">                    <span class="dt">&quot;value&quot;</span><span class="fu">:</span> <span class="st">&quot;Azuay&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb142-23" data-line-number="23">                    <span class="dt">&quot;created_on&quot;</span><span class="fu">:</span> <span class="st">&quot;2000-01-01T00:00:00.000000000-00:00&quot;</span></a>
<a class="sourceLine" id="cb142-24" data-line-number="24">                <span class="fu">}</span></a>
<a class="sourceLine" id="cb142-25" data-line-number="25">            <span class="fu">}</span></a>
<a class="sourceLine" id="cb142-26" data-line-number="26">        <span class="fu">},</span></a>
<a class="sourceLine" id="cb142-27" data-line-number="27">        <span class="dt">&quot;results&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb142-28" data-line-number="28">            <span class="dt">&quot;age&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb142-29" data-line-number="29">                <span class="dt">&quot;result_name&quot;</span><span class="fu">:</span> <span class="st">&quot;Age&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb142-30" data-line-number="30">                <span class="dt">&quot;value&quot;</span><span class="fu">:</span> <span class="st">&quot;33&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb142-31" data-line-number="31">                <span class="dt">&quot;node&quot;</span><span class="fu">:</span> <span class="st">&quot;cd2be8c4-59bc-453c-8777-dec9a80043b8&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb142-32" data-line-number="32">                <span class="dt">&quot;created_on&quot;</span><span class="fu">:</span> <span class="st">&quot;2000-01-01T00:00:00.000000000-00:00&quot;</span></a>
<a class="sourceLine" id="cb142-33" data-line-number="33">            <span class="fu">}</span></a>
<a class="sourceLine" id="cb142-34" data-line-number="34">        <span class="fu">}</span></a>
<a class="sourceLine" id="cb142-35" data-line-number="35">    <span class="fu">}</span></a>
<a class="sourceLine" id="cb142-36" data-line-number="36"><span class="fu">}</span></a></code></pre></div>
</div>
<p><a name="events:webhook_called"></a></p>
<h2 id="webhook_called">webhook_called</h2>
<p>webhook_called events are created when a webhook is called. The event contains the status and status code of the response, as well as a full dump of the request and response.</p>
<div class="output_event">
<h3>
Event
</h3>
<div class="sourceCode" id="cb143"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb143-1" data-line-number="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb143-2" data-line-number="2">    <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;webhook_called&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb143-3" data-line-number="3">    <span class="dt">&quot;created_on&quot;</span><span class="fu">:</span> <span class="st">&quot;2006-01-02T15:04:05Z&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb143-4" data-line-number="4">    <span class="dt">&quot;url&quot;</span><span class="fu">:</span> <span class="st">&quot;https://api.ipify.org?format=json&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb143-5" data-line-number="5">    <span class="dt">&quot;status&quot;</span><span class="fu">:</span> <span class="st">&quot;success&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb143-6" data-line-number="6">    <span class="dt">&quot;status_code&quot;</span><span class="fu">:</span> <span class="dv">200</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb143-7" data-line-number="7">    <span class="dt">&quot;request&quot;</span><span class="fu">:</span> <span class="st">&quot;GET https://api.ipify.org?format=json&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb143-8" data-line-number="8">    <span class="dt">&quot;response&quot;</span><span class="fu">:</span> <span class="st">&quot;HTTP/1.1 200 OK {</span><span class="ch">\&quot;</span><span class="st">ip</span><span class="ch">\&quot;</span><span class="st">:</span><span class="ch">\&quot;</span><span class="st">190.154.48.130</span><span class="ch">\&quot;</span><span class="st">}&quot;</span></a>
<a class="sourceLine" id="cb143-9" data-line-number="9"><span class="fu">}</span></a></code></pre></div>
</div>
</div>
</body>
</html> 
    

</body>

</html>